{"version":3,"sources":["main.bundle.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","AE","config","this","className","style","undefined","spacing","fontSize","marginLeft","steps","duration","perDelay","insertStyleNode","animate","elem","wrapper","AnimatedEllipsis","dataset","iStep","elemSpan","document","createElement","delay","innerHTML","cssText","appendChild","prototype","type","getElementsByTagName","window","HTMLElement","animateEllipsis","NodeList","iNode","stopAnimatingEllipsis","hasChildNodes","removeChild","lastChild","2","Backoff","opts","ms","min","max","factor","jitter","attempts","Math","pow","rand","random","deviation","floor","reset","setMin","setMax","setJitter","3","chars","lookup","Uint8Array","charCodeAt","encode","arraybuffer","bytes","len","base64","substring","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","p","ArrayBuffer","4","global","mapArrayBufferViews","ary","chunk","buffer","buf","byteLength","copy","set","byteOffset","BlobBuilderConstructor","options","bb","BlobBuilder","append","getBlob","BlobConstructor","Blob","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","size","blobSupportsArrayBufferView","blobBuilderSupported","self","5","process","define","amd","Promise","_dereq_","any","promises","ret","SomePromiseArray","promise","setHowMany","setUnwrap","init","_SomePromiseArray","Async","_customScheduler","_isTickUsed","_lateQueue","Queue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","schedule","AsyncInvokeLater","fn","receiver","arg","push","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","firstLineError","util","setScheduler","prev","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","isNode","stderr","write","stack","exit","throwLater","arguments","setTimeout","invokeLater","invoke","settlePromises","_settlePromises","_drainQueue","queue","shift","_reset","./queue","./schedule","./util","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","_reject","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","target","bindingRejected","bind","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","_setOnCancel","obj","_boundTo","_isBound","value","resolve","noConflict","bluebird","old","./promise","cr","Object","create","callerCache","getterCache","ensureMethod","methodName","message","classString","toString","TypeError","caller","pop","apply","namedGetter","indexedGetter","index","getGetter","canEvaluate","isIdentifier","args","slice","get","propertyName","getter","isIndex","maybeGetter","6","PromiseArray","apiRejection","tryCatch","errorObj","async","_async","cancel","cancellation","_warn","child","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","parent","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","isArray","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","catchFilter","instances","cb","boundTo","predicateLoop","item","matchesPredicate","isObject","keys","getKeys","j","key","./es5","8","Context","_trace","CapturedTrace","peekContext","createContext","longStackTraces","lastIndex","contextStack","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","9","generatePromiseLifecycleEventObject","name","defaultFireEvent","cancellationExecute","executor","reject","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","bindingPropagateFrom","isFulfilled","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","error","ignoreSelf","canAttachTrace","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","join","checkForgottenReturns","returnValue","promiseCreated","wForgottenReturn","_returnedNonUndefined","handlerLine","creatorLine","traceLines","split","cleanStack","line","nodeFramePattern","test","lineMatches","match","parseLinePattern","firstUserLine","msg","deprecated","replacement","warn","shouldUseOwnTrace","warnings","warning","Warning","activeFireEvent","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","charAt","stackFramesAsArray","replace","title","isSoft","console","formatStack","String","printWarning","log","fireRejectionEvent","localHandler","reason","localEventFired","formatNonError","str","JSON","stringify","snip","substr","maxChars","longStackTracesIsSupported","captureStackTrace","parseLineInfo","matches","parseLineInfoRegex","fileName","parseInt","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","result","bluebirdFramePattern","info","_promisesCreated","uncycle","unhandledRejectionHandled","possiblyUnhandledRejection","getDomain","_getDomain","debugging","env","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_setReturnedNonUndefined","_isRejectionUnhandled","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","onPossiblyUnhandledRejection","domain","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","hasLongStackTraces","fireDomEvent","CustomEvent","event","dispatchEvent","domEvent","toLowerCase","detail","cancelable","Event","createEvent","initCustomEvent","fireGlobalEvent","emit","method","eventToObjectGenerator","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","unhandledRejection","rejectionHandled","globalEventFired","domEventFired","warningsOption","_clearCancellationData","_execute","monitoring","_fireEvent","handler","inherits","nodes","stackToIndex","node","currentStack","cycleEdgeNode","currentChildLength","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","err","indexOf","hasStackAfterThrow","isTTY","color","./errors","10","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","11","promiseAllThis","PromiseAll","PromiseMapSeries","PromiseReduce","reduce","all","each","mapSeries","12","subError","nameProperty","defaultMessage","SubError","constructor","OperationalError","cause","_TypeError","_RangeError","es5","Objectfreeze","freeze","CancellationError","TimeoutError","AggregateError","RangeError","methods","Array","defineProperty","configurable","writable","enumerable","level","indent","lines","errorTypes","RejectionError","13","isES5","getDescriptor","getOwnPropertyDescriptor","names","getOwnPropertyNames","getPrototypeOf","propertyIsWritable","prop","descriptor","has","hasOwnProperty","proto","ObjectKeys","ObjectGetDescriptor","ObjectDefineProperty","desc","ObjectFreeze","ObjectGetPrototypeOf","ArrayIsArray","14","PromiseMap","map","filter","15","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","then","lastly","tap","tapCatch","handlerOrPredicate","catchInstances","./catch_filter","16","Proxyable","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","concat","_yieldedPromise","_cancellationPhase","errors","_isResolved","_cleanup","_fulfill","_promiseCancelled","implementsReturn","coroutine","returnSentinel","_continue","_promiseFulfilled","next","_promiseRejected","_run","_rejectCallback","done","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","17","last","spread","18","MappingPromiseArray","limit","_filter","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","isFinite","_init$","_init","values","_values","preservedValues","callback","_totalResolved","_resolve","booleans","19","_resolveFromSyncValue","attempt","20","isUntypedError","wrapAsOperationalError","rErrorKey","markAsOriginatingFromRejection","nodebackForPromise","multiArgs","wrapped","maybeWrapAsError","21","spreadAdapter","val","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","22","check","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","v","deferReject","fillTypes","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","APPLY","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","base","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","x","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","pending","version","toFastProperties","b","c","./any.js","./async","./bind","./call_get.js","./cancel","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","toResolutionValue","Map","resolveValueIfEmpty","asArray","_resolveEmptyArray","_iterate","getActualLength","shouldCopyValues","isResolved","24","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","suffix","getDataPropertyOrDefault","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","inheritedDataKeys","passesDefaultFilter","defaultFilter","makeNodePromisifiedClosure","__","promisified","THIS","defaultThis","withAppended","promisifyAll","promisifier","RegExp","escapeIdentRegex","promisifiedKey","makeNodePromisified","promisify","makeNodePromisifiedEval","noCopyProps","copyDescriptors","isClass","25","PropertiesPromiseArray","entries","isMap","Es6Map","mapToEntries","_isMap","props","castValue","extractEntry","forEach","entriesToMap","keyOffset","26","arrayMove","src","srcIndex","dst","dstIndex","capacity","_capacity","_front","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","27","race","raceLater","array","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","noAsyncScheduler","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","isRecentNode","nativePromise","navigator","standalone","cordova","div","attributes","toggleScheduled","div2","classList","toggle","observe","scheduleToggle","disconnect","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","_howMany","_unwrap","_initialized","some","howMany","CANCELLATION","isArrayResolved","_canPossiblyFulfill","_getRangeError","count","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","getThen","isAnyBluebirdPromise","doThenable","doGetThen","hasProp","34","HandleWrapper","handle","successClear","clearTimeout","failureClear","afterValue","afterTimeout","timeout","handleWrapper","35","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","resources","iterator","tryDispose","Disposer","data","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","NULL","resource","doDispose","_unsetDisposable","d","using","input","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatcher","tryCatchTarget","isPrimitive","maybeError","safeToString","appendee","defaultValue","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","FakeConstructor","rident","filledRange","prefix","isError","ignore","from","to","hasEnvVariables","globalObject","Child","Parent","T","excludedPrototypes","Function","isExcludedProto","visitedKeys","enumeration","Symbol","ArrayFrom","itResult","it","chrome","loadTimes","versions","Number","P","_process","Emitter","mixin","on","addEventListener","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","listeners","hasListeners","useColors","documentElement","WebkitAppearance","firebug","exception","table","userAgent","$1","formatArgs","namespace","humanize","diff","lastC","save","namespaces","storage","removeItem","load","DEBUG","local","localStorage","colors","formatters","enable","./debug","selectColor","hash","abs","createDebug","enabled","curr","Date","prevTime","coerce","unshift","format","formatter","skips","disable","root","factory","download","strFileName","strMimeType","dataUrlToBlob","strUrl","parts","decoder","atob","decodeURIComponent","binData","mx","uiArr","myBlob","saver","url","winMode","anchor","href","setAttribute","display","body","click","URL","revokeObjectURL","defaultMime","open","confirm","location","blob","reader","mimeType","payload","MozBlob","WebKitBlob","ajax","XMLHttpRequest","responseType","onload","response","send","msSaveBlob","tempUiArr","createObjectURL","btoa","y","encodeURIComponent","FileReader","readAsDataURL","parser","./socket","engine.io-parser","Socket","uri","parseuri","hostname","host","secure","protocol","port","query","agent","parseqs","upgrade","path","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","transports","transportOptions","readyState","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","freeGlobal","extraHeaders","localAddress","id","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","clone","priorWebsocketSuccess","Transport","createTransport","EIO","transport","sid","socket","requestTimeout","protocols","setTransport","onDrain","packet","onPacket","onError","onClose","probe","onTransportOpen","upgradeLosesBinary","supportsBinary","failed","upgrading","pause","cleanup","flush","freezeTransport","close","onerror","onTransportClose","onclose","onupgrade","onOpen","onHandshake","parse","setPing","filterUpgrades","onHeartbeat","ping","sendPacket","compress","cleanupAndClose","waitForUpgrade","filteredUpgrades","./transport","./transports/index","component-emitter","indexof","description","doOpen","doClose","packets","onData","decodePacket","polling","xd","xs","isSSL","xdomain","xscheme","XHR","JSONP","websocket","./polling-jsonp","./polling-xhr","./websocket","xmlhttprequest-ssl","empty","JSONPPolling","Polling","___eio","script","inherit","rNewline","rEscapedNewline","parentNode","form","iframe","doPoll","insertAt","insertBefore","head","doWrite","complete","initIframe","html","iframeId","area","position","top","left","action","submit","attachEvent","onreadystatechange","./polling","component-inherit","Request","isBinary","unloadHandler","requests","abort","request","req","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","withCredentials","hasXDR","onLoad","responseText","contentType","getResponseHeader","status","requestsCount","onSuccess","fromError","XDomainRequest","hasXHR2","yeast","poll","onPause","total","decodePayload","callbackfn","encodePayload","schema","b64","../transport","WS","usingBrowserWebSocket","BrowserWebSocket","WebSocket","NodeWebSocket","MozWebSocket","headers","ws","supports","binary","addEventListeners","onopen","onmessage","ev","encodePacket","Buffer","hasCORS","has-cors","after","err_cb","proxy","bail","noop","start","end","abv","ii","encodeBase64Object","encodeArrayBuffer","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","readAsArrayBuffer","encodeBlob","dontSendBlobs","tryDecode","utf8","strict","el","base64encoder","hasBinary","sliceBuffer","isAndroid","isPhantomJS","pong","packetslist","utf8encode","encoded","b64data","fromCharCode","typed","basic","utf8decode","decodeBase64Packet","rest","setLengthHeader","encodeOne","doneCallback","encodePayloadAsBlob","encodePayloadAsArrayBuffer","results","decodePayloadAsBinary","chr","encodedPackets","totalLength","acc","resultArray","bufferIndex","isString","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","tailArray","msgLength","./keys","./utf8","arraybuffer.slice","base64-arraybuffer","has-binary2","arr","ucs2decode","string","extra","output","counter","ucs2encode","stringFromCharCode","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","symbol","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","tmp","freeExports","freeModule","nodeType","object","isBuffer","withNativeBlob","withNativeFile","File","isarray","exec","parseFloat","h","m","fmtShort","round","fmtLong","plural","ceil","isNaN","long","qs","qry","pairs","pair","re","source","authority","ipv6uri","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","run","Item","browser","argv","addListener","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","io","sameNamespace","cache","nsps","newConnection","forceNew","multiplex","Manager","managers","connect","./manager","./url","socket.io-parser","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","connecting","lastPing","encoding","packetBuffer","_parser","encoder","Encoder","Decoder","autoConnect","eio","emitAll","nsp","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","reconnecting","reconnect","skipReconnect","openSub","errorSub","timer","destroy","onping","onpong","ondata","add","ondecoded","onConnecting","processPacketQueue","pack","subsLength","onreconnect","./on","backo2","component-bind","engine.io-client","37","38","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","toArray","events","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","subEvents","EVENT","CONNECT","onpacket","onconnect","BINARY_EVENT","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","ERROR","ack","sent","emitBuffered","to-array","39","loc","ipv6","40","dup","41","_deconstructPacket","isBuf","placeholder","_placeholder","num","newData","_reconstructPacket","deconstructPacket","packetData","attachments","reconstructPacket","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","bloblessData","./is-buffer","42","encodeAsString","encodeAsBinary","writeEncoding","deconstruction","reconstructor","decodeString","types","tryParse","BinaryReconstructor","reconPack","hasBin","takeBinaryData","finishedReconstruction","./binary","43","44","list","45","alphabet","decoded","now","seed","46","asyncPlayFromUrl","sound","Audio","play","startListening","listening","recordingInterval","setInterval","detectAudio","detectAudioInterval","ui","showListeningStatus","stopListening","clearInterval","startMediaRecorder","mediaRecorder","recording","silenceDuration","stopMediaRecorder","stop","vol","meter","volume","volThreshold","keepRecording","waitDuration","waitAfterVolumeLength","ambientListeningWindowLength","makeGenerateCall","text","frame","formData","FormData","$","processData","asyncGenerateAndPlayUtterance","startProgress","takeScreenshot","res","endProgress","setUserSpeakingText","audio_file","catch","setMessageText","processAudioBlob","showProcessingStatus","transcription","setUserGeneratingText","hideStatusSection","createAudioMeter","audioContext","clipLevel","averaging","clipLag","processor","createScriptProcessor","onaudioprocess","volumeAudioProcess","clipping","lastClip","destination","checkClipping","performance","shutdown","inputBuffer","getChannelData","bufLength","sum","rms","sqrt","setupMediaSource","stream","mediaStreamSource","createMediaStreamSource","MediaRecorder","recordedChunks","ondataavailable","onstop","asyncGetWebcamAudioInfo","mediaDevices","enumerateDevices","devices","defaultDevice","device","kind","label","deviceId","asyncSetupAudio","AudioContext","deviceInfo","getUserMedia","audio","exact","setupSpacebarRecord","setupArduinoButtonRecord","./_ui","socket.io-client","47","playVideo","video","loop","pauseVideo","stopVideo","currentTime","$body","addClass","videoPlayingClass","activated","removeClass","isActivated","$videoWrapper","$video","find","48","setupAnimateEllipsis","querySelectorAll","keyCode","screensaver","keepAlive","setupActivityWake","wakeUp","screensaverTimeout","goToSleep","screensaverTimeoutLength","setFramesPerCheck","captureVideoFrame","$inProgress","css","showStatusSection","hide","$listeningStatus","show","$processingStatus","$userSpeakingText","$userGeneratingText","$generatingTextSection","$speakingTextSection","$userText","$messageText","$statusWrap","asyncInit","asyncSetupCamera","$cameraRoot","startWatching","./_audio","./_screensaver","./_video","animated-ellipsis","downloadjs","49","awake","framesPerCheck","awakeFramesPerCheck","asleepFramesPerCheck","hookUpDetectorEvents","detector","faces","image","timestamp","frames","err_detail","detectorRunning","stopWatching","faceMode","affdex","FaceDetectorMode","SMALL_FACES","CameraDetector","50"],"mappings":"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","file":"../main.bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function() {\n    \"use strict\";\n\n    function AE( config ) {\n        this.className  = config && config.className  || 'animated-ellipsis';\n        this.style      = config && config.style      || undefined;\n        this.spacing    = config && config.spacing    || '0.1rem';\n        this.fontSize   = config && config.fontSize   || '2rem';\n        this.marginLeft = config && config.marginLeft || '0.1rem';\n        this.steps      = 3; \n        this.duration   = 2;\n        this.perDelay   = 0.2;\n\n        this.insertStyleNode();\n    }\n\n    AE.prototype.insertStyleNode = function() {\n        const style = document.createElement( 'style' );\n        style.type = 'text/css';\n        style.innerHTML = ' \\\n            @-webkit-keyframes animated-ellipsis { \\\n                0%   { opacity: 0; } \\\n                50%  { opacity: 0; } \\\n                100% { opacity: 1; } \\\n            } \\\n            @keyframes animated-ellipsis { \\\n                0%   { opacity: 0; } \\\n                50%  { opacity: 0; } \\\n                100% { opacity: 1; } \\\n            }';\n        this.style = document.getElementsByTagName( 'head' )[ 0 ].appendChild( style );\n    }\n\n    var AnimatedEllipsis = new AE();\n\n    function animate( elem ) {\n        var wrapper = elem;\n        const steps = AnimatedEllipsis.steps;\n        const perDelay = AnimatedEllipsis.perDelay;\n        const marginLeft = wrapper.dataset.marginLeft || AnimatedEllipsis.marginLeft;\n        const spacing = wrapper.dataset.spacing || AnimatedEllipsis.spacing;\n\n        wrapper.style.marginLeft = marginLeft;\n        wrapper.style.fontSize = AnimatedEllipsis.fontSize;\n\n        for ( var iStep = 0; iStep < steps; ++iStep ) {\n            var elemSpan = document.createElement( 'span' );\n            const delay = iStep * perDelay;\n\n            elemSpan.className = '.$step' + iStep;\n            elemSpan.innerHTML = '.';\n            var cssText = '\\\n                opacity: 0; \\\n                -webkit-animation: animated-ellipsis ' + AnimatedEllipsis.duration + 's infinite; \\\n                animation: animated-ellipsis ' + AnimatedEllipsis.duration + 's infinite; \\\n                -webkit-animation-delay: ' + delay+ 's; \\\n                animation-delay: ' + delay + 's; \\\n            ';\n\n            if ( iStep !== 0 ) {\n                cssText += ( 'margin-left: ' + spacing + ';' );\n            }\n\n            elemSpan.style.cssText = cssText;\n            elemSpan = wrapper.appendChild( elemSpan );\n        }\n    }\n\n    window.HTMLElement.prototype.animateEllipsis = function() {\n        animate( this );\n    };\n\n    window.NodeList.prototype.animateEllipsis = function() {\n        for ( var iNode = 0; iNode < this.length; ++iNode ) {\n            var elem = this[ iNode ];\n            animate( elem );\n        }\n    };\n\n    window.HTMLElement.prototype.stopAnimatingEllipsis = function() {\n        var wrapper = this;\n        while ( wrapper.hasChildNodes() ) {\n            wrapper.removeChild( wrapper.lastChild );\n        }\n\n        delete wrapper.style.marginLeft;\n    };\n\n    module.exports = AnimatedEllipsis;\n\n}());\n\n},{}],2:[function(require,module,exports){\n\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n\n},{}],3:[function(require,module,exports){\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n\n},{}],4:[function(require,module,exports){\n(function (global){\n/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],5:[function(require,module,exports){\n(function (process,global){\n/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2017 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.5.1\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    var self = this;\n    setTimeout(function() {\n        self._notifyUnhandledRejection();\n    }, 1);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./catch_filter\":7,\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.1\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj instanceof Error ||\n        (obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\");\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"_process\":34}],6:[function(require,module,exports){\n\n},{}],7:[function(require,module,exports){\n/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n\n},{}],8:[function(require,module,exports){\n\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n},{}],9:[function(require,module,exports){\n\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};\n},{}],10:[function(require,module,exports){\n(function (process){\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n}).call(this,require('_process'))\n},{\"./debug\":11,\"_process\":34}],11:[function(require,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n},{\"ms\":31}],12:[function(require,module,exports){\n//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.download = factory();\n  }\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n\n},{}],13:[function(require,module,exports){\n\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n\n},{\"./socket\":14,\"engine.io-parser\":24}],14:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (global.location && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // other options for Node.js client\n  var freeGlobal = typeof global === 'object' && global;\n  if (freeGlobal.global === freeGlobal) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0)\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./transport\":15,\"./transports/index\":16,\"component-emitter\":8,\"debug\":10,\"engine.io-parser\":24,\"indexof\":30,\"parseqs\":32,\"parseuri\":33}],15:[function(require,module,exports){\n/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n\n},{\"component-emitter\":8,\"engine.io-parser\":24}],16:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling-jsonp\":17,\"./polling-xhr\":18,\"./websocket\":20,\"xmlhttprequest-ssl\":21}],17:[function(require,module,exports){\n(function (global){\n\n/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling\":19,\"component-inherit\":9}],18:[function(require,module,exports){\n(function (global){\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname !== global.location.hostname ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          var contentType;\n          try {\n            contentType = xhr.getResponseHeader('Content-Type');\n          } catch (e) {}\n          if (contentType === 'application/octet-stream') {\n            xhr.responseType = 'arraybuffer';\n          }\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (global.document) {\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling\":19,\"component-emitter\":8,\"component-inherit\":9,\"debug\":10,\"xmlhttprequest-ssl\":21}],19:[function(require,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n},{\"../transport\":15,\"component-inherit\":9,\"debug\":10,\"engine.io-parser\":24,\"parseqs\":32,\"xmlhttprequest-ssl\":21,\"yeast\":45}],20:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\nvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\nvar NodeWebSocket;\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocket = BrowserWebSocket;\nif (!WebSocket && typeof window === 'undefined') {\n  WebSocket = NodeWebSocket;\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocket = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws = this.usingBrowserWebSocket ? (protocols ? new WebSocket(uri, protocols) : new WebSocket(uri)) : new WebSocket(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? global.Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../transport\":15,\"component-inherit\":9,\"debug\":10,\"engine.io-parser\":24,\"parseqs\":32,\"ws\":6,\"yeast\":45}],21:[function(require,module,exports){\n(function (global){\n// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new global[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"has-cors\":29}],22:[function(require,module,exports){\nmodule.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n\n},{}],23:[function(require,module,exports){\n/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n\n},{}],24:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (global && global.ArrayBuffer) {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof global.Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./keys\":25,\"./utf8\":26,\"after\":22,\"arraybuffer.slice\":23,\"base64-arraybuffer\":3,\"blob\":4,\"has-binary2\":27}],25:[function(require,module,exports){\n\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n\n},{}],26:[function(require,module,exports){\n(function (global){\n/*! https://mths.be/utf8js v2.1.2 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint, strict) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tif (strict) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t\t' is not a scalar value'\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint, strict) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\t\tcodePoint = 0xFFFD;\n\t\t\t}\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string, opts) {\n\t\topts = opts || {};\n\t\tvar strict = false !== opts.strict;\n\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, its not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol(strict) {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString, opts) {\n\t\topts = opts || {};\n\t\tvar strict = false !== opts.strict;\n\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.1.2',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],27:[function(require,module,exports){\n(function (global){\n/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof global.Blob === 'function' || toString.call(global.Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof global.File === 'function' || toString.call(global.File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof global.Buffer === 'function' && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\n     (typeof global.ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n     (withNativeBlob && obj instanceof Blob) ||\n     (withNativeFile && obj instanceof File)\n    ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"isarray\":28}],28:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n},{}],29:[function(require,module,exports){\n\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n\n},{}],30:[function(require,module,exports){\n\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n},{}],31:[function(require,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n},{}],32:[function(require,module,exports){\n/**\r\n * Compiles a querystring\r\n * Returns string representation of the object\r\n *\r\n * @param {Object}\r\n * @api private\r\n */\r\n\r\nexports.encode = function (obj) {\r\n  var str = '';\r\n\r\n  for (var i in obj) {\r\n    if (obj.hasOwnProperty(i)) {\r\n      if (str.length) str += '&';\r\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\n/**\r\n * Parses a simple querystring into an object\r\n *\r\n * @param {String} qs\r\n * @api private\r\n */\r\n\r\nexports.decode = function(qs){\r\n  var qry = {};\r\n  var pairs = qs.split('&');\r\n  for (var i = 0, l = pairs.length; i < l; i++) {\r\n    var pair = pairs[i].split('=');\r\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n  }\r\n  return qry;\r\n};\r\n\n},{}],33:[function(require,module,exports){\n/**\r\n * Parses an URI\r\n *\r\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\r\n * @api private\r\n */\r\n\r\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\r\n\r\nvar parts = [\r\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\r\n];\r\n\r\nmodule.exports = function parseuri(str) {\r\n    var src = str,\r\n        b = str.indexOf('['),\r\n        e = str.indexOf(']');\r\n\r\n    if (b != -1 && e != -1) {\r\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\r\n    }\r\n\r\n    var m = re.exec(str || ''),\r\n        uri = {},\r\n        i = 14;\r\n\r\n    while (i--) {\r\n        uri[parts[i]] = m[i] || '';\r\n    }\r\n\r\n    if (b != -1 && e != -1) {\r\n        uri.source = src;\r\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\r\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\r\n        uri.ipv6uri = true;\r\n    }\r\n\r\n    return uri;\r\n};\r\n\n},{}],34:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],35:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n\n},{\"./manager\":36,\"./socket\":38,\"./url\":39,\"debug\":10,\"socket.io-parser\":42}],36:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n\n},{\"./on\":37,\"./socket\":38,\"backo2\":2,\"component-bind\":7,\"component-emitter\":8,\"debug\":10,\"engine.io-client\":13,\"indexof\":30,\"socket.io-parser\":42}],37:[function(require,module,exports){\n\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n\n},{}],38:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = { type: parser.EVENT, data: args };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  delete this.flags;\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  if (packet.nsp !== this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags = this.flags || {};\n  this.flags.compress = compress;\n  return this;\n};\n\n},{\"./on\":37,\"component-bind\":7,\"component-emitter\":8,\"debug\":10,\"parseqs\":32,\"socket.io-parser\":42,\"to-array\":44}],39:[function(require,module,exports){\n(function (global){\n\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"debug\":10,\"parseuri\":33}],40:[function(require,module,exports){\narguments[4][28][0].apply(exports,arguments)\n},{\"dup\":28}],41:[function(require,module,exports){\n(function (global){\n/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof global.Blob === 'function' || toString.call(global.Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof global.File === 'function' || toString.call(global.File) === '[object FileConstructor]';\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./is-buffer\":43,\"isarray\":40}],42:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar hasBin = require('has-binary2');\nvar binary = require('./binary');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  if ((obj.type === exports.EVENT || obj.type === exports.ACK) && hasBin(obj.data)) {\n    obj.type = obj.type === exports.EVENT ? exports.BINARY_EVENT : exports.BINARY_ACK;\n  }\n\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  }\n  else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    str += JSON.stringify(obj.data);\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) return error();\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var buf = '';\n    while (str.charAt(++i) !== '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      p.nsp += c;\n      if (i === str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i === str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    p = tryParse(p, str.substr(i));\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(p, str) {\n  try {\n    p.data = JSON.parse(str);\n  } catch(e){\n    return error();\n  }\n  return p; \n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error() {\n  return {\n    type: exports.ERROR,\n    data: 'parser error'\n  };\n}\n\n},{\"./binary\":41,\"./is-buffer\":43,\"component-emitter\":8,\"debug\":10,\"has-binary2\":27}],43:[function(require,module,exports){\n(function (global){\n\nmodule.exports = isBuf;\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],44:[function(require,module,exports){\nmodule.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n\n},{}],45:[function(require,module,exports){\n'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n\n},{}],46:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('bluebird');\n\nvar ui = require('./_ui');\n\nvar io = require('socket.io-client');\nvar socket = io();\n\nvar recordingInterval = null; // reference to setInterval\n\nvar audioContext = null;\nvar meter = null;\nvar mediaRecorder = null;\n\nvar keepRecording = false;\nvar recording = false;\nvar listening = false;\nvar silenceDuration = 0; // ms\n\nvar volThreshold = 7.5; // softer than this will be considered silence\n\nvar detectAudioInterval = 500; // ms\nvar waitAfterVolumeLength = 1 * 1000; // ms\nvar ambientListeningWindowLength = 5 * 1000; // ms\n\nfunction asyncPlayFromUrl(url) {\n  return new Promise(function (resolve, reject) {\n    var sound = new Audio(url);\n    sound.play();\n\n    sound.addEventListener('ended', function () {\n      resolve();\n    });\n  });\n}\n\nfunction startListening() {\n  // turn button on\n  socket.emit('new_button_status', {\n    status: 1\n  });\n\n  if (listening !== true) {\n    console.log('start listening');\n    listening = true;\n    recordingInterval = setInterval(detectAudio, detectAudioInterval);\n    ui.showListeningStatus();\n  } else {\n    console.log('already listening');\n  }\n}\n\nfunction stopListening() {\n  // turn button off\n  socket.emit('new_button_status', {\n    status: 0\n  });\n\n  clearInterval(recordingInterval);\n  recordingInterval = null;\n  listening = false;\n}\n\nfunction startMediaRecorder() {\n  console.log('starting recording');\n  mediaRecorder.start();\n  recording = true;\n  silenceDuration = 0;\n}\n\nfunction stopMediaRecorder() {\n  console.log('stopping recording');\n  mediaRecorder.stop();\n  recording = false;\n  silenceDuration = 0;\n\n  stopListening();\n}\n\n// called each interval via setInterval\nfunction detectAudio() {\n  var vol = Math.round(meter.volume * 100);\n  console.log('vol', vol);\n\n  if (recording) {\n    if (vol > volThreshold) {\n      // don't stop\n      keepRecording = true;\n      silenceDuration = 0;\n    } else {\n      // if we think we have audio content, stop recording within wait period. otherwise, record for longer\n      var waitDuration = keepRecording ? waitAfterVolumeLength : ambientListeningWindowLength;\n\n      if (silenceDuration > waitDuration) {\n        // we haven't heard anything in a while, stop recording\n        stopMediaRecorder();\n      } else {\n        // we haven't passed the silence threshold, wait\n        silenceDuration += detectAudioInterval;\n      }\n    }\n  } else {\n    try {\n      startMediaRecorder();\n    } catch (e) {\n      console.log(e);\n    }\n\n    if (vol > volThreshold) {\n      keepRecording = true;\n      silenceDuration = 0;\n    }\n  }\n}\n\nfunction makeGenerateCall(text, frame) {\n  var formData = new FormData();\n  formData.append('blob', frame.blob);\n  formData.append('text', text);\n\n  return $.ajax({\n    type: 'POST',\n    url: '/generate',\n    data: formData,\n    processData: false,\n    contentType: false,\n    timeout: 15 * 1000\n  });\n}\n\nfunction asyncGenerateAndPlayUtterance(text) {\n  return new Promise(function (resolve, reject) {\n    ui.startProgress();\n\n    ui.takeScreenshot().then(function (frame) {\n      return makeGenerateCall(text, frame);\n    }).then(function (res) {\n      ui.endProgress();\n\n      console.log('generate res', res);\n      ui.setUserSpeakingText(text);\n\n      return asyncPlayFromUrl(res.audio_file).then(function () {\n        resolve();\n      }).catch(function (e) {\n        ui.setMessageText('Could not play generated audio.');\n        reject(e);\n      });\n    }).catch(function (e) {\n      ui.setMessageText('Oops, something went wrong!');\n      console.log(e);\n      ui.endProgress();\n      reject(e);\n    });\n  });\n}\n\nfunction processAudioBlob(blob) {\n  stopListening();\n  var formData = new FormData();\n  formData.append('data', blob);\n\n  ui.startProgress();\n  ui.showProcessingStatus();\n  $.ajax({\n    type: 'POST',\n    url: '/process',\n    data: formData,\n    processData: false,\n    contentType: false\n  }).then(function (res) {\n    console.log('transcription res', res);\n    var transcription = res.transcription;\n    ui.setUserGeneratingText(transcription);\n    return asyncGenerateAndPlayUtterance(transcription);\n  }).then(function () {\n    ui.endProgress();\n    // startListening();\n    // ui.setStatus(`audio played, waiting for spacebar press`);\n    ui.hideStatusSection();\n  }).catch(function (e) {\n    console.log('post error', e);\n    ui.endProgress();\n    // handleAudioProcessingError(e);\n    var message = 'Oops, something went wrong. Please try again.';\n    asyncGenerateAndPlayUtterance(message).then(function () {\n      ui.setMessageText('');\n    }).catch(function (e) {\n      console.log(e);\n      ui.setMessageText('');\n    });\n    // alert('could not transcribe, unable to submit to lyrebird');\n    // startListening();\n  });\n}\n\nfunction createAudioMeter(audioContext, clipLevel, averaging, clipLag) {\n  var processor = audioContext.createScriptProcessor(512);\n  processor.onaudioprocess = volumeAudioProcess;\n  processor.clipping = false;\n  processor.lastClip = 0;\n  processor.volume = 0;\n  processor.clipLevel = clipLevel || 0.98;\n  processor.averaging = averaging || 0.95;\n  processor.clipLag = clipLag || 750;\n\n  // this will have no effect, since we don't copy the input to the output,\n  // but works around a current Chrome bug.\n  processor.connect(audioContext.destination);\n\n  processor.checkClipping = function () {\n    if (!this.clipping) return false;\n    if (this.lastClip + this.clipLag < window.performance.now()) this.clipping = false;\n    return this.clipping;\n  };\n\n  processor.shutdown = function () {\n    this.disconnect();\n    this.onaudioprocess = null;\n  };\n\n  return processor;\n}\n\nfunction volumeAudioProcess(event) {\n  var buf = event.inputBuffer.getChannelData(0);\n  var bufLength = buf.length;\n  var sum = 0;\n  var x = void 0;\n\n  // Do a root-mean-square on the samples: sum up the squares...\n  for (var i = 0; i < bufLength; i++) {\n    x = buf[i];\n    if (Math.abs(x) >= this.clipLevel) {\n      this.clipping = true;\n      this.lastClip = window.performance.now();\n    }\n    sum += x * x;\n  }\n\n  // ... then take the square root of the sum.\n  var rms = Math.sqrt(sum / bufLength);\n\n  // Now smooth this out with the averaging factor applied\n  // to the previous sample - take the max here because we\n  // want \"fast attack, slow release.\"\n  this.volume = Math.max(rms, this.volume * this.averaging);\n}\n\nfunction setupMediaSource(stream) {\n  // Create an AudioNode from the stream for getting vol\n  var mediaStreamSource = audioContext.createMediaStreamSource(stream);\n\n  // Create a new volume meter and connect it.\n  meter = createAudioMeter(audioContext);\n  mediaStreamSource.connect(meter);\n\n  // Create a MediaRecorder\n  mediaRecorder = new MediaRecorder(stream);\n  var recordedChunks = [];\n\n  mediaRecorder.ondataavailable = function (e) {\n    recordedChunks.push(e.data);\n  };\n\n  mediaRecorder.onstop = function (e) {\n    var blob = new Blob(recordedChunks, { type: 'audio/webm;codecs=opus' });\n    recordedChunks = [];\n\n    if (keepRecording === true) {\n      console.log('keeping nonsilent recording');\n      processAudioBlob(blob);\n    } else {\n      console.log('discarding silent recording');\n      var message = 'I didn\\'t catch that. Please speak loudly and clearly.';\n      asyncGenerateAndPlayUtterance(message).then(function () {\n        ui.setMessageText('');\n      }).catch(function (e) {\n        console.log(e);\n        ui.setMessageText('');\n      });\n    }\n\n    keepRecording = false;\n    blob = null; // reset blob to make sure memory isn't leaking\n  };\n}\n\nfunction asyncGetWebcamAudioInfo() {\n  return new Promise(function (resolve, reject) {\n    navigator.mediaDevices.enumerateDevices().then(function (devices) {\n      var defaultDevice = null;\n      devices.map(function (device) {\n        if (device.kind === 'audioinput') {\n          if (device.label === 'HD Webcam C615') {\n            resolve(device);\n          } else if (device.deviceId === 'default') {\n            defaultDevice = device;\n          }\n        }\n      });\n      resolve(defaultDevice); // if we can't find webcam, return default\n    });\n  });\n}\n\nfunction asyncSetupAudio() {\n  return new Promise(function (resolve, reject) {\n    audioContext = new AudioContext();\n\n    asyncGetWebcamAudioInfo().then(function (deviceInfo) {\n      console.log(deviceInfo);\n      return navigator.mediaDevices.getUserMedia({\n        audio: {\n          deviceId: {\n            exact: deviceInfo.deviceId\n            // mandatory: {\n            //   googEchoCancellation: 'false',\n            //   googAutoGainControl: 'false',\n            //   googNoiseSuppression: 'false',\n            //   googHighpassFilter: 'false'\n            // }\n          } }\n      });\n    }).then(setupMediaSource).then(ui.setupSpacebarRecord).then(ui.setupArduinoButtonRecord).then(resolve).catch(function (e) {\n      reject(e);\n    });\n  });\n}\n\nexports.asyncSetupAudio = asyncSetupAudio;\nexports.asyncGenerateAndPlayUtterance = asyncGenerateAndPlayUtterance;\nexports.asyncPlayFromUrl = asyncPlayFromUrl;\nexports.startListening = startListening;\nexports.stopListening = stopListening;\n\n},{\"./_ui\":48,\"bluebird\":5,\"socket.io-client\":35}],47:[function(require,module,exports){\n'use strict';\n\nvar $body = $('body');\nvar $videoWrapper = $('#video-wrap');\nvar $video = $videoWrapper.find('video');\nvar video = $video[0];\n\nvar activated = false;\nvar screensaverTimeout = null;\n\nvar videoPlayingClass = 'video-playing';\n\nfunction playVideo() {\n  video.loop = true;\n  video.play();\n}\n\nfunction pauseVideo() {\n  video.pause();\n}\n\nfunction stopVideo() {\n  pauseVideo();\n  video.currentTime = 0;\n}\n\nfunction start() {\n  console.log('starting screensaver');\n  playVideo();\n  $body.addClass(videoPlayingClass);\n  activated = true;\n}\n\nfunction stop() {\n  console.log('stopping screensaver');\n  stopVideo();\n  $body.removeClass(videoPlayingClass);\n  activated = false;\n}\n\nfunction isActivated() {\n  return activated;\n}\n\nexports.start = start;\nexports.stop = stop;\nexports.isActivated = isActivated;\n\n},{}],48:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('bluebird');\nvar download = require('downloadjs');\nrequire('animated-ellipsis');\n\nvar io = require('socket.io-client');\nvar socket = io();\n\nvar screensaver = require('./_screensaver');\nvar video = require('./_video');\nvar audio = require('./_audio');\n\nvar $statusWrap = $('#status-wrap');\nvar $listeningStatus = $('#listening');\nvar $processingStatus = $('#processing');\nvar $userText = $('#user-text');\nvar $messageText = $('#message-text');\nvar $inProgress = $('#in-progress');\n\nvar $generatingTextSection = $('#user-text .generating');\nvar $userGeneratingText = $('#user-text .generating-text');\nvar $speakingTextSection = $('#user-text .speaking');\nvar $userSpeakingText = $('#user-text .speaking-text');\n\nvar $cameraRoot = $('#camera-root');\nvar $cameraCanvas = void 0;\n\nvar screensaverTimeout = null;\nvar screensaverTimeoutLength = 2.5 * 60 * 1000; // ms\n\nfunction setupAnimateEllipsis() {\n  document.querySelectorAll('.ae').animateEllipsis();\n}\n\nfunction playFromUrl(url) {\n  var sound = new Audio(url);\n  sound.play();\n}\n\nfunction setupSpacebarRecord() {\n  $(window).on('keydown', function (e) {\n    if (e.keyCode === 32) {\n      // spacebar!\n      audio.startListening();\n    }\n  });\n}\n\nfunction setupArduinoButtonRecord() {\n  socket.on('new_msg', function (data) {\n    switch (data.msg) {\n      case 'press':\n        console.log('button press');\n\n        if (screensaver.isActivated() !== true) {\n          audio.startListening(); // else start recording\n          console.log('screensaver not activated, listening');\n        }\n\n        keepAlive();\n\n        break;\n      default:\n        console.log('unknown message from arduino:', data.msg);\n        break;\n    }\n  });\n}\n\n// prevent screensaver on every user action\nfunction setupActivityWake() {\n  $(window).on('keydown mousemove mousedown', function (e) {\n    keepAlive();\n  });\n}\n\n// stave off screensaver\nfunction keepAlive() {\n  console.log('keepalive');\n  if (screensaver.isActivated()) {\n    wakeUp();\n  }\n\n  clearTimeout(screensaverTimeout);\n  screensaverTimeout = setTimeout(goToSleep, screensaverTimeoutLength);\n}\n\n// start screensaver, reset everything\nfunction goToSleep() {\n  screensaver.start();\n  video.setFramesPerCheck(false);\n}\n\nfunction wakeUp() {\n  screensaver.stop();\n  video.setFramesPerCheck(true);\n}\n\nvar count = 0;\nfunction takeScreenshot() {\n  return new Promise(function (resolve, reject) {\n    try {\n      var frame = captureVideoFrame('face_video', 'png');\n      resolve(frame);\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nfunction startProgress() {\n  $inProgress.css('visibility', 'visible');\n  // NProgress.start();\n  // return;\n}\n\nfunction endProgress() {\n  $inProgress.css('visibility', 'hidden');\n  // NProgress.done();\n  // return;\n}\n\nfunction showListeningStatus() {\n  showStatusSection();\n  $('.status').hide();\n  $listeningStatus.show();\n}\n\nfunction showProcessingStatus() {\n  showStatusSection();\n  $('.status').hide();\n  $processingStatus.show();\n}\n\nfunction setUserSpeakingText(text) {\n  showStatusSection();\n  $('.status').hide();\n  $userSpeakingText.text(text);\n  $userGeneratingText.text('');\n  $generatingTextSection.hide();\n  $speakingTextSection.show();\n  $userText.show();\n}\n\nfunction setUserGeneratingText(text) {\n  showStatusSection();\n  $('.status').hide();\n  $userGeneratingText.text(text);\n  $userSpeakingText.text('');\n  $speakingTextSection.hide();\n  $generatingTextSection.show();\n  $userText.show();\n}\n\nfunction setMessageText(text) {\n  showStatusSection();\n  $('.status').hide();\n  $messageText.text(text);\n  $messageText.show();\n}\n\nfunction hideStatusSection() {\n  $statusWrap.hide();\n}\n\nfunction showStatusSection() {\n  $statusWrap.show();\n}\n\nfunction asyncInit() {\n  return new Promise(function (resolve, reject) {\n    try {\n      setupActivityWake();\n      setupAnimateEllipsis();\n      video.asyncSetupCamera($cameraRoot).then(video.startWatching).then(keepAlive).then(resolve).catch(function (e) {\n        reject(e);\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nexports.keepAlive = keepAlive;\nexports.asyncInit = asyncInit;\nexports.startProgress = startProgress;\nexports.endProgress = endProgress;\nexports.takeScreenshot = takeScreenshot;\nexports.setupSpacebarRecord = setupSpacebarRecord;\nexports.setupArduinoButtonRecord = setupArduinoButtonRecord;\nexports.showListeningStatus = showListeningStatus;\nexports.showProcessingStatus = showProcessingStatus;\nexports.setMessageText = setMessageText;\nexports.hideStatusSection = hideStatusSection;\nexports.showStatusSection = showStatusSection;\nexports.setUserSpeakingText = setUserSpeakingText;\nexports.setUserGeneratingText = setUserGeneratingText;\n\n},{\"./_audio\":46,\"./_screensaver\":47,\"./_video\":49,\"animated-ellipsis\":1,\"bluebird\":5,\"downloadjs\":12,\"socket.io-client\":35}],49:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('bluebird');\n\nvar ui = require('./_ui');\n\nvar detector = void 0;\nvar detectorRunning = false;\nvar frames = 0;\n\nvar awakeFramesPerCheck = 50;\nvar asleepFramesPerCheck = 5;\n\nvar framesPerCheck = awakeFramesPerCheck;\n\nfunction setFramesPerCheck() {\n  var awake = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  if (awake === true) {\n    framesPerCheck = awakeFramesPerCheck;\n  } else {\n    framesPerCheck = asleepFramesPerCheck;\n  }\n}\n\nfunction hookUpDetectorEvents(detector) {\n  detector.addEventListener('onInitializeFailure', function (e) {\n    console.log('initialize failure');\n    console.log(e);\n  });\n\n  /*\n  onImageResults success is called when a frame is processed successfully and receives 3 parameters:\n  - Faces: Dictionary of faces in the frame keyed by the face id.\n           For each face id, the values of detected emotions, expressions, appearane metrics\n           and coordinates of the feature points\n  - image: An imageData object containing the pixel values for the processed frame.\n  - timestamp: The timestamp of the captured image in seconds.\n  */\n  detector.addEventListener('onImageResultsSuccess', function (faces, image, timestamp) {\n    console.log('frame');\n    if (frames % framesPerCheck === 0) {\n      console.log('checking frame for face');\n      if (faces.length > 0) {\n        ui.keepAlive();\n      } else {\n        console.log('no faces');\n      }\n    }\n\n    if (frames++ > 100) frames = 0;\n  });\n\n  /*\n  onImageResults success receives 3 parameters:\n  - image: An imageData object containing the pixel values for the processed frame.\n  - timestamp: An imageData object contain the pixel values for the processed frame.\n  - err_detail: A string contains the encountered exception.\n  */\n  detector.addEventListener('onImageResultsFailure', function (image, timestamp, err_detail) {\n    console.log('image result failure');\n    console.log(image, timestamp, err_detail);\n  });\n\n  detector.addEventListener('onResetSuccess', function (e) {\n    console.log('reset success');\n    console.log(e);\n  });\n\n  detector.addEventListener('onResetFailure', function (e) {\n    console.log('reset failure');\n    console.log(e);\n  });\n\n  detector.addEventListener('onStopSuccess', function (e) {\n    console.log('stop success');\n    console.log(e);\n  });\n\n  detector.addEventListener('onStopFailure', function (e) {\n    console.log('stop failure');\n    console.log(e);\n  });\n\n  detector.addEventListener('onWebcamConnectSuccess', function () {\n    console.log('connected to webcam');\n  });\n\n  detector.addEventListener('onWebcamConnectFailure', function () {\n    var message = 'Error connecting to webcam. Make sure it is plugged in and enabled.';\n    ui.setMessageText(message);\n    console.log(message);\n  });\n}\n\nfunction startWatching() {\n  if (detectorRunning !== true) {\n    detectorRunning = true;\n    detector.start();\n  }\n}\n\nfunction stopWatching() {\n  if (detectorRunning === true) {\n    detectorRunning = false;\n    detector.stop();\n  }\n}\n\nfunction asyncSetupCamera($cameraRoot) {\n  return new Promise(function (resolve, reject) {\n    try {\n      // const faceMode = affdex.FaceDetectorMode.LARGE_FACES;\n      var faceMode = affdex.FaceDetectorMode.SMALL_FACES;\n\n      // check camera size with https://webrtchacks.github.io/WebRTC-Camera-Resolution/\n      var width = 640,\n          height = 480;\n\n      console.log('Setting camera resolution at ' + width + 'x' + height);\n\n      detector = new affdex.CameraDetector($cameraRoot[0], width, height, faceMode);\n\n      hookUpDetectorEvents(detector);\n      resolve();\n    } catch (e) {\n      console.log('error setting up camera', e);\n      reject(e);\n    }\n  });\n}\n\nexports.asyncSetupCamera = asyncSetupCamera;\nexports.startWatching = startWatching;\nexports.stopWatching = stopWatching;\nexports.setFramesPerCheck = setFramesPerCheck;\n\n},{\"./_ui\":48,\"bluebird\":5}],50:[function(require,module,exports){\n'use strict';\n\nvar ui = require('./_ui');\nvar video = require('./_video');\nvar audio = require('./_audio');\n\nfunction run() {\n  ui.asyncInit().then(audio.asyncSetupAudio).then(function () {\n    console.log('done!');\n  }).catch(function (e) {\n    console.log('error initting', e);\n  });\n}\n\n$(window).on('load', function () {\n  run();\n});\n\n},{\"./_audio\":46,\"./_ui\":48,\"./_video\":49}]},{},[50]);\n"]}