{"version":3,"sources":["main.bundle.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Backoff","opts","this","ms","min","max","factor","jitter","attempts","prototype","duration","Math","pow","rand","random","deviation","floor","reset","setMin","setMax","setJitter","2","chars","lookup","Uint8Array","charCodeAt","encode","arraybuffer","bytes","len","base64","substring","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","p","ArrayBuffer","3","global","mapArrayBufferViews","ary","chunk","buffer","buf","byteLength","copy","set","byteOffset","BlobBuilderConstructor","options","bb","BlobBuilder","append","getBlob","type","BlobConstructor","Blob","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","size","blobSupportsArrayBufferView","blobBuilderSupported","self","window","4","process","define","amd","Promise","_dereq_","any","promises","ret","SomePromiseArray","promise","setHowMany","setUnwrap","init","_SomePromiseArray","Async","_customScheduler","_isTickUsed","_lateQueue","Queue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","schedule","AsyncInvokeLater","fn","receiver","arg","push","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","firstLineError","util","setScheduler","prev","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","isNode","stderr","write","stack","exit","throwLater","arguments","setTimeout","invokeLater","invoke","settlePromises","_settlePromises","_drainQueue","queue","shift","_reset","./queue","./schedule","./util","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","_reject","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","target","bindingRejected","bind","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","undefined","_setOnCancel","obj","_boundTo","_isBound","value","resolve","noConflict","bluebird","old","./promise","5","cr","Object","create","callerCache","getterCache","ensureMethod","methodName","message","classString","toString","TypeError","caller","pop","apply","namedGetter","indexedGetter","index","getGetter","canEvaluate","isIdentifier","args","slice","get","propertyName","getter","isIndex","maybeGetter","6","PromiseArray","apiRejection","tryCatch","errorObj","async","_async","cancel","cancellation","_warn","child","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","parent","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","isArray","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","catchFilter","instances","cb","boundTo","predicateLoop","item","matchesPredicate","isObject","keys","getKeys","j","key","./es5","8","Context","_trace","CapturedTrace","peekContext","createContext","longStackTraces","lastIndex","contextStack","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","9","generatePromiseLifecycleEventObject","name","defaultFireEvent","cancellationExecute","executor","reject","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","bindingPropagateFrom","isFulfilled","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","error","ignoreSelf","canAttachTrace","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","join","checkForgottenReturns","returnValue","promiseCreated","wForgottenReturn","_returnedNonUndefined","handlerLine","creatorLine","traceLines","split","cleanStack","line","nodeFramePattern","test","lineMatches","match","parseLinePattern","firstUserLine","msg","deprecated","replacement","warn","shouldUseOwnTrace","config","warnings","warning","Warning","activeFireEvent","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","charAt","stackFramesAsArray","replace","title","isSoft","console","formatStack","String","printWarning","log","fireRejectionEvent","localHandler","reason","localEventFired","formatNonError","str","JSON","stringify","snip","substr","maxChars","longStackTracesIsSupported","captureStackTrace","parseLineInfo","matches","parseLineInfoRegex","fileName","parseInt","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","result","bluebirdFramePattern","info","_promisesCreated","uncycle","unhandledRejectionHandled","possiblyUnhandledRejection","getDomain","_getDomain","debugging","env","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_setReturnedNonUndefined","_isRejectionUnhandled","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","onPossiblyUnhandledRejection","domain","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","hasLongStackTraces","fireDomEvent","CustomEvent","event","dispatchEvent","domEvent","toLowerCase","detail","cancelable","Event","document","createEvent","initCustomEvent","fireGlobalEvent","emit","method","eventToObjectGenerator","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","unhandledRejection","rejectionHandled","globalEventFired","domEventFired","warningsOption","_clearCancellationData","_execute","monitoring","_fireEvent","handler","inherits","nodes","stackToIndex","node","currentStack","cycleEdgeNode","currentChildLength","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","err","indexOf","hasStackAfterThrow","isTTY","color","./errors","10","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","11","promiseAllThis","PromiseAll","PromiseMapSeries","PromiseReduce","reduce","all","each","mapSeries","12","subError","nameProperty","defaultMessage","SubError","constructor","OperationalError","cause","_TypeError","_RangeError","es5","Objectfreeze","freeze","CancellationError","TimeoutError","AggregateError","RangeError","methods","Array","defineProperty","configurable","writable","enumerable","level","indent","lines","errorTypes","RejectionError","13","isES5","getDescriptor","getOwnPropertyDescriptor","names","getOwnPropertyNames","getPrototypeOf","propertyIsWritable","prop","descriptor","has","hasOwnProperty","proto","ObjectKeys","ObjectGetDescriptor","ObjectDefineProperty","desc","ObjectFreeze","ObjectGetPrototypeOf","ArrayIsArray","14","PromiseMap","map","filter","15","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","then","lastly","tap","tapCatch","handlerOrPredicate","catchInstances","./catch_filter","16","Proxyable","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","concat","_yieldedPromise","_cancellationPhase","errors","_isResolved","_cleanup","_fulfill","_promiseCancelled","implementsReturn","coroutine","returnSentinel","_continue","_promiseFulfilled","next","_promiseRejected","_run","_rejectCallback","done","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","17","last","spread","18","MappingPromiseArray","limit","_filter","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","isFinite","_init$","_init","values","_values","preservedValues","callback","_totalResolved","_resolve","booleans","19","_resolveFromSyncValue","attempt","20","isUntypedError","wrapAsOperationalError","rErrorKey","markAsOriginatingFromRejection","nodebackForPromise","multiArgs","wrapped","maybeWrapAsError","21","spreadAdapter","val","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","22","check","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","v","deferReject","fillTypes","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","APPLY","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","base","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","x","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","pending","version","toFastProperties","b","c","./any.js","./async","./bind","./call_get.js","./cancel","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","toResolutionValue","Map","resolveValueIfEmpty","asArray","_resolveEmptyArray","_iterate","getActualLength","shouldCopyValues","isResolved","24","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","suffix","getDataPropertyOrDefault","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","inheritedDataKeys","passesDefaultFilter","defaultFilter","makeNodePromisifiedClosure","__","promisified","THIS","defaultThis","withAppended","promisifyAll","promisifier","RegExp","escapeIdentRegex","promisifiedKey","makeNodePromisified","promisify","makeNodePromisifiedEval","noCopyProps","copyDescriptors","isClass","25","PropertiesPromiseArray","entries","isMap","Es6Map","mapToEntries","_isMap","props","castValue","extractEntry","forEach","entriesToMap","keyOffset","26","arrayMove","src","srcIndex","dst","dstIndex","capacity","_capacity","_front","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","27","race","raceLater","array","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","noAsyncScheduler","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","isRecentNode","nativePromise","navigator","standalone","cordova","div","createElement","attributes","toggleScheduled","div2","classList","toggle","observe","scheduleToggle","disconnect","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","_howMany","_unwrap","_initialized","some","howMany","CANCELLATION","isArrayResolved","_canPossiblyFulfill","_getRangeError","count","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","getThen","isAnyBluebirdPromise","doThenable","doGetThen","hasProp","34","HandleWrapper","handle","successClear","clearTimeout","failureClear","afterValue","delay","afterTimeout","timeout","handleWrapper","35","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","resources","iterator","tryDispose","Disposer","data","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","NULL","resource","doDispose","_unsetDisposable","d","using","input","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatcher","tryCatchTarget","isPrimitive","maybeError","safeToString","appendee","defaultValue","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","FakeConstructor","rident","filledRange","prefix","isError","ignore","from","to","hasEnvVariables","globalObject","Child","Parent","T","excludedPrototypes","Function","isExcludedProto","visitedKeys","enumeration","Symbol","ArrayFrom","itResult","it","chrome","loadTimes","versions","Number","P","_process","Emitter","mixin","on","addEventListener","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","listeners","hasListeners","useColors","documentElement","style","WebkitAppearance","firebug","exception","table","userAgent","$1","formatArgs","namespace","humanize","diff","lastC","save","namespaces","storage","removeItem","load","DEBUG","local","localStorage","colors","formatters","enable","./debug","selectColor","hash","abs","createDebug","enabled","curr","Date","prevTime","coerce","unshift","format","formatter","skips","disable","root","factory","download","strFileName","strMimeType","dataUrlToBlob","strUrl","parts","decoder","atob","decodeURIComponent","binData","mx","uiArr","myBlob","saver","url","winMode","anchor","href","setAttribute","className","innerHTML","display","body","appendChild","click","removeChild","URL","revokeObjectURL","defaultMime","open","confirm","location","blob","reader","mimeType","payload","MozBlob","WebKitBlob","ajax","XMLHttpRequest","responseType","onload","response","send","msSaveBlob","tempUiArr","createObjectURL","btoa","y","encodeURIComponent","FileReader","readAsDataURL","parser","./socket","engine.io-parser","Socket","uri","parseuri","hostname","host","secure","protocol","port","query","agent","parseqs","upgrade","path","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","transports","transportOptions","readyState","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","freeGlobal","extraHeaders","localAddress","id","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","clone","priorWebsocketSuccess","Transport","createTransport","EIO","transport","sid","socket","requestTimeout","protocols","setTransport","onDrain","packet","onPacket","onError","onClose","probe","onTransportOpen","upgradeLosesBinary","supportsBinary","failed","upgrading","pause","cleanup","flush","freezeTransport","close","onerror","onTransportClose","onclose","onupgrade","onOpen","onHandshake","parse","setPing","filterUpgrades","onHeartbeat","ping","sendPacket","compress","cleanupAndClose","waitForUpgrade","filteredUpgrades","./transport","./transports/index","component-emitter","indexof","description","doOpen","doClose","packets","onData","decodePacket","polling","xd","xs","isSSL","xdomain","xscheme","XHR","JSONP","websocket","./polling-jsonp","./polling-xhr","./websocket","xmlhttprequest-ssl","empty","JSONPPolling","Polling","___eio","script","inherit","rNewline","rEscapedNewline","parentNode","form","iframe","doPoll","insertAt","getElementsByTagName","insertBefore","head","doWrite","complete","initIframe","html","iframeId","area","position","top","left","action","submit","attachEvent","onreadystatechange","./polling","component-inherit","Request","isBinary","unloadHandler","requests","abort","request","req","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","withCredentials","hasXDR","onLoad","responseText","contentType","getResponseHeader","status","requestsCount","onSuccess","fromError","XDomainRequest","hasXHR2","yeast","poll","onPause","total","decodePayload","callbackfn","encodePayload","schema","b64","../transport","WS","usingBrowserWebSocket","BrowserWebSocket","WebSocket","NodeWebSocket","MozWebSocket","headers","ws","supports","binary","addEventListeners","onopen","onmessage","ev","encodePacket","Buffer","hasCORS","has-cors","after","err_cb","proxy","bail","noop","start","end","abv","ii","encodeBase64Object","encodeArrayBuffer","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","readAsArrayBuffer","encodeBlob","dontSendBlobs","tryDecode","utf8","strict","el","base64encoder","hasBinary","sliceBuffer","isAndroid","isPhantomJS","pong","packetslist","utf8encode","encoded","b64data","fromCharCode","typed","basic","utf8decode","decodeBase64Packet","rest","setLengthHeader","encodeOne","doneCallback","encodePayloadAsBlob","encodePayloadAsArrayBuffer","results","decodePayloadAsBinary","chr","encodedPackets","totalLength","acc","resultArray","bufferIndex","isString","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","tailArray","msgLength","./keys","./utf8","arraybuffer.slice","base64-arraybuffer","has-binary2","arr","ucs2decode","string","extra","output","counter","ucs2encode","stringFromCharCode","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","symbol","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","tmp","freeExports","freeModule","nodeType","object","isBuffer","withNativeBlob","withNativeFile","File","isarray","exec","parseFloat","h","m","fmtShort","round","fmtLong","plural","ceil","isNaN","long","NProgress","clamp","toBarPerc","barPositionCSS","speed","ease","barCSS","Settings","positionUsing","transform","margin-left","transition","hasClass","element","addClass","oldList","newList","removeClass","removeElement","settings","minimum","easing","trickle","trickleRate","trickleSpeed","showSpinner","barSelector","spinnerSelector","template","configure","started","isStarted","progress","render","bar","querySelector","offsetWidth","getPositioningCSS","css","opacity","remove","work","force","inc","amount","initial","$promise","state","always","fromStart","isRendered","getElementById","spinner","perc","bodyStyle","vendorPrefix","camelCase","letter","getVendorProp","vendorName","cssPrefixes","capName","getStyleProp","cssProps","applyCss","properties","qs","qry","pairs","pair","re","source","authority","ipv6uri","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","run","Item","browser","argv","addListener","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","io","sameNamespace","cache","nsps","newConnection","forceNew","multiplex","Manager","managers","connect","./manager","./url","socket.io-parser","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","connecting","lastPing","encoding","packetBuffer","_parser","encoder","Encoder","Decoder","autoConnect","eio","emitAll","nsp","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","reconnecting","reconnect","skipReconnect","openSub","errorSub","timer","destroy","onping","onpong","ondata","add","ondecoded","onConnecting","processPacketQueue","pack","subsLength","onreconnect","./on","backo2","component-bind","engine.io-client","37","38","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","toArray","events","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","subEvents","EVENT","CONNECT","onpacket","onconnect","BINARY_EVENT","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","ERROR","ack","sent","emitBuffered","to-array","39","loc","ipv6","40","dup","41","_deconstructPacket","isBuf","placeholder","_placeholder","num","newData","_reconstructPacket","deconstructPacket","packetData","attachments","reconstructPacket","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","bloblessData","./is-buffer","42","encodeAsString","encodeAsBinary","writeEncoding","deconstruction","reconstructor","decodeString","types","tryParse","BinaryReconstructor","reconPack","hasBin","takeBinaryData","finishedReconstruction","./binary","43","44","list","45","alphabet","decoded","now","seed","46","asyncPlayFromUrl","sound","Audio","play","startListening","ui","showVol","listening","recordingInterval","setInterval","detectAudio","detectAudioInterval","setStatus","stopListening","hideVol","clearInterval","startMediaRecorder","mediaRecorder","recording","silenceDuration","stopMediaRecorder","stop","vol","meter","volume","setVol","volThreshold","keepRecording","waitDuration","waitAfterVolumeLength","ambientListeningWindowLength","makeGenerateCall","text","frame","formData","FormData","$","processData","asyncGenerateAndPlayUtterance","takeScreenshot","res","audio_file","catch","processAudioBlob","startProgress","transcription","endProgress","createAudioMeter","audioContext","clipLevel","averaging","clipLag","processor","createScriptProcessor","onaudioprocess","volumeAudioProcess","clipping","lastClip","destination","checkClipping","performance","shutdown","inputBuffer","getChannelData","bufLength","sum","rms","sqrt","setupMediaSource","stream","mediaStreamSource","createMediaStreamSource","MediaRecorder","recordedChunks","ondataavailable","onstop","asyncGetWebcamAudioInfo","mediaDevices","enumerateDevices","devices","defaultDevice","device","kind","label","deviceId","asyncSetupAudio","AudioContext","deviceInfo","getUserMedia","audio","exact","setupSpacebarRecord","setupArduinoButtonRecord","./_ui","nprogress","socket.io-client","47","playVideo","video","pauseVideo","stopVideo","currentTime","$body","videoPlayingClass","activated","isActivated","$videoWrapper","$video","find","48","keyCode","setupInputChange","$input","$submitButton","setupFormSubmit","$form","preventDefault","setupActivityWake","keepAlive","screensaver","wakeUp","screensaverTimeout","goToSleep","screensaverTimeoutLength","captureVideoFrame","$status","$volume","hide","show","asyncInit","asyncSetupCamera","$cameraRoot","startWatching","./_audio","./_screensaver","./_video","downloadjs","49","hookUpDetectorEvents","detector","faces","image","timestamp","frames","faceInFrame","err_detail","setVideoStatus","detectorRunning","stopWatching","faceMode","affdex","FaceDetectorMode","LARGE_FACES","CameraDetector","50"],"mappings":"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","file":"../main.bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n\n},{}],2:[function(require,module,exports){\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n\n},{}],3:[function(require,module,exports){\n(function (global){\n/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],4:[function(require,module,exports){\n(function (process,global){\n/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2017 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.5.1\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    var self = this;\n    setTimeout(function() {\n        self._notifyUnhandledRejection();\n    }, 1);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./catch_filter\":7,\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.1\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj instanceof Error ||\n        (obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\");\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"_process\":34}],5:[function(require,module,exports){\n\n},{}],6:[function(require,module,exports){\n/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n\n},{}],7:[function(require,module,exports){\n\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n},{}],8:[function(require,module,exports){\n\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};\n},{}],9:[function(require,module,exports){\n(function (process){\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n}).call(this,require('_process'))\n},{\"./debug\":10,\"_process\":34}],10:[function(require,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n},{\"ms\":30}],11:[function(require,module,exports){\n//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.download = factory();\n  }\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n\n},{}],12:[function(require,module,exports){\n\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n\n},{\"./socket\":13,\"engine.io-parser\":23}],13:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (global.location && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // other options for Node.js client\n  var freeGlobal = typeof global === 'object' && global;\n  if (freeGlobal.global === freeGlobal) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0)\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./transport\":14,\"./transports/index\":15,\"component-emitter\":7,\"debug\":9,\"engine.io-parser\":23,\"indexof\":29,\"parseqs\":32,\"parseuri\":33}],14:[function(require,module,exports){\n/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n\n},{\"component-emitter\":7,\"engine.io-parser\":23}],15:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling-jsonp\":16,\"./polling-xhr\":17,\"./websocket\":19,\"xmlhttprequest-ssl\":20}],16:[function(require,module,exports){\n(function (global){\n\n/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling\":18,\"component-inherit\":8}],17:[function(require,module,exports){\n(function (global){\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname !== global.location.hostname ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          var contentType;\n          try {\n            contentType = xhr.getResponseHeader('Content-Type');\n          } catch (e) {}\n          if (contentType === 'application/octet-stream') {\n            xhr.responseType = 'arraybuffer';\n          }\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (global.document) {\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling\":18,\"component-emitter\":7,\"component-inherit\":8,\"debug\":9,\"xmlhttprequest-ssl\":20}],18:[function(require,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n},{\"../transport\":14,\"component-inherit\":8,\"debug\":9,\"engine.io-parser\":23,\"parseqs\":32,\"xmlhttprequest-ssl\":20,\"yeast\":45}],19:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\nvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\nvar NodeWebSocket;\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocket = BrowserWebSocket;\nif (!WebSocket && typeof window === 'undefined') {\n  WebSocket = NodeWebSocket;\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocket = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws = this.usingBrowserWebSocket ? (protocols ? new WebSocket(uri, protocols) : new WebSocket(uri)) : new WebSocket(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? global.Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../transport\":14,\"component-inherit\":8,\"debug\":9,\"engine.io-parser\":23,\"parseqs\":32,\"ws\":5,\"yeast\":45}],20:[function(require,module,exports){\n(function (global){\n// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new global[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"has-cors\":28}],21:[function(require,module,exports){\nmodule.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n\n},{}],22:[function(require,module,exports){\n/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n\n},{}],23:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (global && global.ArrayBuffer) {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof global.Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./keys\":24,\"./utf8\":25,\"after\":21,\"arraybuffer.slice\":22,\"base64-arraybuffer\":2,\"blob\":3,\"has-binary2\":26}],24:[function(require,module,exports){\n\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n\n},{}],25:[function(require,module,exports){\n(function (global){\n/*! https://mths.be/utf8js v2.1.2 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint, strict) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tif (strict) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t\t' is not a scalar value'\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint, strict) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\t\tcodePoint = 0xFFFD;\n\t\t\t}\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string, opts) {\n\t\topts = opts || {};\n\t\tvar strict = false !== opts.strict;\n\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, its not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol(strict) {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString, opts) {\n\t\topts = opts || {};\n\t\tvar strict = false !== opts.strict;\n\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.1.2',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],26:[function(require,module,exports){\n(function (global){\n/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof global.Blob === 'function' || toString.call(global.Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof global.File === 'function' || toString.call(global.File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof global.Buffer === 'function' && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\n     (typeof global.ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n     (withNativeBlob && obj instanceof Blob) ||\n     (withNativeFile && obj instanceof File)\n    ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"isarray\":27}],27:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n},{}],28:[function(require,module,exports){\n\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n\n},{}],29:[function(require,module,exports){\n\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n},{}],30:[function(require,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n},{}],31:[function(require,module,exports){\n/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress\n * @license MIT */\n\n;(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.NProgress = factory();\n  }\n\n})(this, function() {\n  var NProgress = {};\n\n  NProgress.version = '0.2.0';\n\n  var Settings = NProgress.settings = {\n    minimum: 0.08,\n    easing: 'ease',\n    positionUsing: '',\n    speed: 200,\n    trickle: true,\n    trickleRate: 0.02,\n    trickleSpeed: 800,\n    showSpinner: true,\n    barSelector: '[role=\"bar\"]',\n    spinnerSelector: '[role=\"spinner\"]',\n    parent: 'body',\n    template: '<div class=\"bar\" role=\"bar\"><div class=\"peg\"></div></div><div class=\"spinner\" role=\"spinner\"><div class=\"spinner-icon\"></div></div>'\n  };\n\n  /**\n   * Updates configuration.\n   *\n   *     NProgress.configure({\n   *       minimum: 0.1\n   *     });\n   */\n  NProgress.configure = function(options) {\n    var key, value;\n    for (key in options) {\n      value = options[key];\n      if (value !== undefined && options.hasOwnProperty(key)) Settings[key] = value;\n    }\n\n    return this;\n  };\n\n  /**\n   * Last number.\n   */\n\n  NProgress.status = null;\n\n  /**\n   * Sets the progress bar status, where `n` is a number from `0.0` to `1.0`.\n   *\n   *     NProgress.set(0.4);\n   *     NProgress.set(1.0);\n   */\n\n  NProgress.set = function(n) {\n    var started = NProgress.isStarted();\n\n    n = clamp(n, Settings.minimum, 1);\n    NProgress.status = (n === 1 ? null : n);\n\n    var progress = NProgress.render(!started),\n        bar      = progress.querySelector(Settings.barSelector),\n        speed    = Settings.speed,\n        ease     = Settings.easing;\n\n    progress.offsetWidth; /* Repaint */\n\n    queue(function(next) {\n      // Set positionUsing if it hasn't already been set\n      if (Settings.positionUsing === '') Settings.positionUsing = NProgress.getPositioningCSS();\n\n      // Add transition\n      css(bar, barPositionCSS(n, speed, ease));\n\n      if (n === 1) {\n        // Fade out\n        css(progress, { \n          transition: 'none', \n          opacity: 1 \n        });\n        progress.offsetWidth; /* Repaint */\n\n        setTimeout(function() {\n          css(progress, { \n            transition: 'all ' + speed + 'ms linear', \n            opacity: 0 \n          });\n          setTimeout(function() {\n            NProgress.remove();\n            next();\n          }, speed);\n        }, speed);\n      } else {\n        setTimeout(next, speed);\n      }\n    });\n\n    return this;\n  };\n\n  NProgress.isStarted = function() {\n    return typeof NProgress.status === 'number';\n  };\n\n  /**\n   * Shows the progress bar.\n   * This is the same as setting the status to 0%, except that it doesn't go backwards.\n   *\n   *     NProgress.start();\n   *\n   */\n  NProgress.start = function() {\n    if (!NProgress.status) NProgress.set(0);\n\n    var work = function() {\n      setTimeout(function() {\n        if (!NProgress.status) return;\n        NProgress.trickle();\n        work();\n      }, Settings.trickleSpeed);\n    };\n\n    if (Settings.trickle) work();\n\n    return this;\n  };\n\n  /**\n   * Hides the progress bar.\n   * This is the *sort of* the same as setting the status to 100%, with the\n   * difference being `done()` makes some placebo effect of some realistic motion.\n   *\n   *     NProgress.done();\n   *\n   * If `true` is passed, it will show the progress bar even if its hidden.\n   *\n   *     NProgress.done(true);\n   */\n\n  NProgress.done = function(force) {\n    if (!force && !NProgress.status) return this;\n\n    return NProgress.inc(0.3 + 0.5 * Math.random()).set(1);\n  };\n\n  /**\n   * Increments by a random amount.\n   */\n\n  NProgress.inc = function(amount) {\n    var n = NProgress.status;\n\n    if (!n) {\n      return NProgress.start();\n    } else {\n      if (typeof amount !== 'number') {\n        amount = (1 - n) * clamp(Math.random() * n, 0.1, 0.95);\n      }\n\n      n = clamp(n + amount, 0, 0.994);\n      return NProgress.set(n);\n    }\n  };\n\n  NProgress.trickle = function() {\n    return NProgress.inc(Math.random() * Settings.trickleRate);\n  };\n\n  /**\n   * Waits for all supplied jQuery promises and\n   * increases the progress as the promises resolve.\n   *\n   * @param $promise jQUery Promise\n   */\n  (function() {\n    var initial = 0, current = 0;\n\n    NProgress.promise = function($promise) {\n      if (!$promise || $promise.state() === \"resolved\") {\n        return this;\n      }\n\n      if (current === 0) {\n        NProgress.start();\n      }\n\n      initial++;\n      current++;\n\n      $promise.always(function() {\n        current--;\n        if (current === 0) {\n            initial = 0;\n            NProgress.done();\n        } else {\n            NProgress.set((initial - current) / initial);\n        }\n      });\n\n      return this;\n    };\n\n  })();\n\n  /**\n   * (Internal) renders the progress bar markup based on the `template`\n   * setting.\n   */\n\n  NProgress.render = function(fromStart) {\n    if (NProgress.isRendered()) return document.getElementById('nprogress');\n\n    addClass(document.documentElement, 'nprogress-busy');\n    \n    var progress = document.createElement('div');\n    progress.id = 'nprogress';\n    progress.innerHTML = Settings.template;\n\n    var bar      = progress.querySelector(Settings.barSelector),\n        perc     = fromStart ? '-100' : toBarPerc(NProgress.status || 0),\n        parent   = document.querySelector(Settings.parent),\n        spinner;\n    \n    css(bar, {\n      transition: 'all 0 linear',\n      transform: 'translate3d(' + perc + '%,0,0)'\n    });\n\n    if (!Settings.showSpinner) {\n      spinner = progress.querySelector(Settings.spinnerSelector);\n      spinner && removeElement(spinner);\n    }\n\n    if (parent != document.body) {\n      addClass(parent, 'nprogress-custom-parent');\n    }\n\n    parent.appendChild(progress);\n    return progress;\n  };\n\n  /**\n   * Removes the element. Opposite of render().\n   */\n\n  NProgress.remove = function() {\n    removeClass(document.documentElement, 'nprogress-busy');\n    removeClass(document.querySelector(Settings.parent), 'nprogress-custom-parent');\n    var progress = document.getElementById('nprogress');\n    progress && removeElement(progress);\n  };\n\n  /**\n   * Checks if the progress bar is rendered.\n   */\n\n  NProgress.isRendered = function() {\n    return !!document.getElementById('nprogress');\n  };\n\n  /**\n   * Determine which positioning CSS rule to use.\n   */\n\n  NProgress.getPositioningCSS = function() {\n    // Sniff on document.body.style\n    var bodyStyle = document.body.style;\n\n    // Sniff prefixes\n    var vendorPrefix = ('WebkitTransform' in bodyStyle) ? 'Webkit' :\n                       ('MozTransform' in bodyStyle) ? 'Moz' :\n                       ('msTransform' in bodyStyle) ? 'ms' :\n                       ('OTransform' in bodyStyle) ? 'O' : '';\n\n    if (vendorPrefix + 'Perspective' in bodyStyle) {\n      // Modern browsers with 3D support, e.g. Webkit, IE10\n      return 'translate3d';\n    } else if (vendorPrefix + 'Transform' in bodyStyle) {\n      // Browsers without 3D support, e.g. IE9\n      return 'translate';\n    } else {\n      // Browsers without translate() support, e.g. IE7-8\n      return 'margin';\n    }\n  };\n\n  /**\n   * Helpers\n   */\n\n  function clamp(n, min, max) {\n    if (n < min) return min;\n    if (n > max) return max;\n    return n;\n  }\n\n  /**\n   * (Internal) converts a percentage (`0..1`) to a bar translateX\n   * percentage (`-100%..0%`).\n   */\n\n  function toBarPerc(n) {\n    return (-1 + n) * 100;\n  }\n\n\n  /**\n   * (Internal) returns the correct CSS for changing the bar's\n   * position given an n percentage, and speed and ease from Settings\n   */\n\n  function barPositionCSS(n, speed, ease) {\n    var barCSS;\n\n    if (Settings.positionUsing === 'translate3d') {\n      barCSS = { transform: 'translate3d('+toBarPerc(n)+'%,0,0)' };\n    } else if (Settings.positionUsing === 'translate') {\n      barCSS = { transform: 'translate('+toBarPerc(n)+'%,0)' };\n    } else {\n      barCSS = { 'margin-left': toBarPerc(n)+'%' };\n    }\n\n    barCSS.transition = 'all '+speed+'ms '+ease;\n\n    return barCSS;\n  }\n\n  /**\n   * (Internal) Queues a function to be executed.\n   */\n\n  var queue = (function() {\n    var pending = [];\n    \n    function next() {\n      var fn = pending.shift();\n      if (fn) {\n        fn(next);\n      }\n    }\n\n    return function(fn) {\n      pending.push(fn);\n      if (pending.length == 1) next();\n    };\n  })();\n\n  /**\n   * (Internal) Applies css properties to an element, similar to the jQuery \n   * css method.\n   *\n   * While this helper does assist with vendor prefixed property names, it \n   * does not perform any manipulation of values prior to setting styles.\n   */\n\n  var css = (function() {\n    var cssPrefixes = [ 'Webkit', 'O', 'Moz', 'ms' ],\n        cssProps    = {};\n\n    function camelCase(string) {\n      return string.replace(/^-ms-/, 'ms-').replace(/-([\\da-z])/gi, function(match, letter) {\n        return letter.toUpperCase();\n      });\n    }\n\n    function getVendorProp(name) {\n      var style = document.body.style;\n      if (name in style) return name;\n\n      var i = cssPrefixes.length,\n          capName = name.charAt(0).toUpperCase() + name.slice(1),\n          vendorName;\n      while (i--) {\n        vendorName = cssPrefixes[i] + capName;\n        if (vendorName in style) return vendorName;\n      }\n\n      return name;\n    }\n\n    function getStyleProp(name) {\n      name = camelCase(name);\n      return cssProps[name] || (cssProps[name] = getVendorProp(name));\n    }\n\n    function applyCss(element, prop, value) {\n      prop = getStyleProp(prop);\n      element.style[prop] = value;\n    }\n\n    return function(element, properties) {\n      var args = arguments,\n          prop, \n          value;\n\n      if (args.length == 2) {\n        for (prop in properties) {\n          value = properties[prop];\n          if (value !== undefined && properties.hasOwnProperty(prop)) applyCss(element, prop, value);\n        }\n      } else {\n        applyCss(element, args[1], args[2]);\n      }\n    }\n  })();\n\n  /**\n   * (Internal) Determines if an element or space separated list of class names contains a class name.\n   */\n\n  function hasClass(element, name) {\n    var list = typeof element == 'string' ? element : classList(element);\n    return list.indexOf(' ' + name + ' ') >= 0;\n  }\n\n  /**\n   * (Internal) Adds a class to an element.\n   */\n\n  function addClass(element, name) {\n    var oldList = classList(element),\n        newList = oldList + name;\n\n    if (hasClass(oldList, name)) return; \n\n    // Trim the opening space.\n    element.className = newList.substring(1);\n  }\n\n  /**\n   * (Internal) Removes a class from an element.\n   */\n\n  function removeClass(element, name) {\n    var oldList = classList(element),\n        newList;\n\n    if (!hasClass(element, name)) return;\n\n    // Replace the class name.\n    newList = oldList.replace(' ' + name + ' ', ' ');\n\n    // Trim the opening and closing spaces.\n    element.className = newList.substring(1, newList.length - 1);\n  }\n\n  /**\n   * (Internal) Gets a space separated list of the class names on the element. \n   * The list is wrapped with a single space on each end to facilitate finding \n   * matches within the list.\n   */\n\n  function classList(element) {\n    return (' ' + (element.className || '') + ' ').replace(/\\s+/gi, ' ');\n  }\n\n  /**\n   * (Internal) Removes an element from the DOM.\n   */\n\n  function removeElement(element) {\n    element && element.parentNode && element.parentNode.removeChild(element);\n  }\n\n  return NProgress;\n});\n\n\n},{}],32:[function(require,module,exports){\n/**\r\n * Compiles a querystring\r\n * Returns string representation of the object\r\n *\r\n * @param {Object}\r\n * @api private\r\n */\r\n\r\nexports.encode = function (obj) {\r\n  var str = '';\r\n\r\n  for (var i in obj) {\r\n    if (obj.hasOwnProperty(i)) {\r\n      if (str.length) str += '&';\r\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\n/**\r\n * Parses a simple querystring into an object\r\n *\r\n * @param {String} qs\r\n * @api private\r\n */\r\n\r\nexports.decode = function(qs){\r\n  var qry = {};\r\n  var pairs = qs.split('&');\r\n  for (var i = 0, l = pairs.length; i < l; i++) {\r\n    var pair = pairs[i].split('=');\r\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n  }\r\n  return qry;\r\n};\r\n\n},{}],33:[function(require,module,exports){\n/**\r\n * Parses an URI\r\n *\r\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\r\n * @api private\r\n */\r\n\r\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\r\n\r\nvar parts = [\r\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\r\n];\r\n\r\nmodule.exports = function parseuri(str) {\r\n    var src = str,\r\n        b = str.indexOf('['),\r\n        e = str.indexOf(']');\r\n\r\n    if (b != -1 && e != -1) {\r\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\r\n    }\r\n\r\n    var m = re.exec(str || ''),\r\n        uri = {},\r\n        i = 14;\r\n\r\n    while (i--) {\r\n        uri[parts[i]] = m[i] || '';\r\n    }\r\n\r\n    if (b != -1 && e != -1) {\r\n        uri.source = src;\r\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\r\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\r\n        uri.ipv6uri = true;\r\n    }\r\n\r\n    return uri;\r\n};\r\n\n},{}],34:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],35:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n\n},{\"./manager\":36,\"./socket\":38,\"./url\":39,\"debug\":9,\"socket.io-parser\":42}],36:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n\n},{\"./on\":37,\"./socket\":38,\"backo2\":1,\"component-bind\":6,\"component-emitter\":7,\"debug\":9,\"engine.io-client\":12,\"indexof\":29,\"socket.io-parser\":42}],37:[function(require,module,exports){\n\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n\n},{}],38:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = { type: parser.EVENT, data: args };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  delete this.flags;\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  if (packet.nsp !== this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags = this.flags || {};\n  this.flags.compress = compress;\n  return this;\n};\n\n},{\"./on\":37,\"component-bind\":6,\"component-emitter\":7,\"debug\":9,\"parseqs\":32,\"socket.io-parser\":42,\"to-array\":44}],39:[function(require,module,exports){\n(function (global){\n\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"debug\":9,\"parseuri\":33}],40:[function(require,module,exports){\narguments[4][27][0].apply(exports,arguments)\n},{\"dup\":27}],41:[function(require,module,exports){\n(function (global){\n/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof global.Blob === 'function' || toString.call(global.Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof global.File === 'function' || toString.call(global.File) === '[object FileConstructor]';\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./is-buffer\":43,\"isarray\":40}],42:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar hasBin = require('has-binary2');\nvar binary = require('./binary');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  if ((obj.type === exports.EVENT || obj.type === exports.ACK) && hasBin(obj.data)) {\n    obj.type = obj.type === exports.EVENT ? exports.BINARY_EVENT : exports.BINARY_ACK;\n  }\n\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  }\n  else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    str += JSON.stringify(obj.data);\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) return error();\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var buf = '';\n    while (str.charAt(++i) !== '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      p.nsp += c;\n      if (i === str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i === str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    p = tryParse(p, str.substr(i));\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(p, str) {\n  try {\n    p.data = JSON.parse(str);\n  } catch(e){\n    return error();\n  }\n  return p; \n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error() {\n  return {\n    type: exports.ERROR,\n    data: 'parser error'\n  };\n}\n\n},{\"./binary\":41,\"./is-buffer\":43,\"component-emitter\":7,\"debug\":9,\"has-binary2\":26}],43:[function(require,module,exports){\n(function (global){\n\nmodule.exports = isBuf;\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],44:[function(require,module,exports){\nmodule.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n\n},{}],45:[function(require,module,exports){\n'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n\n},{}],46:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('bluebird');\nvar NProgress = require('nprogress');\n\nvar ui = require('./_ui');\n\nvar io = require('socket.io-client');\nvar socket = io();\n\nvar recordingInterval = null; // reference to setInterval\n\nvar audioContext = null;\nvar meter = null;\nvar mediaRecorder = null;\n\nvar keepRecording = false;\nvar recording = false;\nvar listening = false;\nvar silenceDuration = 0; // ms\n\nvar volThreshold = 15; // softer than this will be considered silence\n\nvar detectAudioInterval = 500; // ms\nvar waitAfterVolumeLength = 1 * 1000; // ms\nvar ambientListeningWindowLength = 5 * 1000; // ms\n\nfunction asyncPlayFromUrl(url) {\n  return new Promise(function (resolve, reject) {\n    var sound = new Audio(url);\n    sound.play();\n\n    sound.addEventListener('ended', function () {\n      resolve();\n    });\n  });\n}\n\nfunction startListening() {\n  ui.showVol();\n\n  // turn button on\n  socket.emit('new_button_status', {\n    status: 1\n  });\n\n  if (listening !== true) {\n    console.log('start listening');\n    listening = true;\n    recordingInterval = setInterval(detectAudio, detectAudioInterval);\n    ui.setStatus('listening');\n  } else {\n    console.log('already listening');\n  }\n}\n\nfunction stopListening() {\n  ui.hideVol();\n\n  // turn button off\n  socket.emit('new_button_status', {\n    status: 0\n  });\n\n  clearInterval(recordingInterval);\n  recordingInterval = null;\n  listening = false;\n  ui.setStatus('stopped listening');\n}\n\nfunction startMediaRecorder() {\n  console.log('starting recording');\n  mediaRecorder.start();\n  recording = true;\n  silenceDuration = 0;\n}\n\nfunction stopMediaRecorder() {\n  console.log('stopping recording');\n  mediaRecorder.stop();\n  recording = false;\n  silenceDuration = 0;\n\n  stopListening();\n}\n\n// called each interval via setInterval\nfunction detectAudio() {\n  var vol = Math.round(meter.volume * 100);\n  console.log('vol', vol);\n  ui.setVol(vol);\n\n  if (recording) {\n    if (vol > volThreshold) {\n      // don't stop\n      keepRecording = true;\n      silenceDuration = 0;\n    } else {\n      // if we think we have audio content, stop recording within wait period. otherwise, record for longer\n      var waitDuration = keepRecording ? waitAfterVolumeLength : ambientListeningWindowLength;\n\n      if (silenceDuration > waitDuration) {\n        // we haven't heard anything in a while, stop recording\n        stopMediaRecorder();\n      } else {\n        // we haven't passed the silence threshold, wait\n        silenceDuration += detectAudioInterval;\n      }\n    }\n  } else {\n    try {\n      startMediaRecorder();\n    } catch (e) {\n      console.log(e);\n    }\n\n    if (vol > volThreshold) {\n      keepRecording = true;\n      silenceDuration = 0;\n    }\n  }\n}\n\nfunction makeGenerateCall(text, frame) {\n  var formData = new FormData();\n  formData.append('blob', frame.blob);\n  formData.append('text', text);\n\n  return $.ajax({\n    type: 'POST',\n    url: '/generate',\n    data: formData,\n    processData: false,\n    contentType: false,\n    timeout: 15 * 1000\n  });\n}\n\nfunction asyncGenerateAndPlayUtterance(text) {\n  return new Promise(function (resolve, reject) {\n    NProgress.start();\n\n    ui.takeScreenshot().then(function (frame) {\n      ui.setStatus('generating lyrebird utterance: ' + text);\n      return makeGenerateCall(text, frame);\n    }).then(function (res) {\n      NProgress.done();\n\n      console.log('generate res', res);\n\n      ui.setStatus('playing lyrebird recording');\n      return asyncPlayFromUrl(res.audio_file).then(function () {\n        ui.setStatus('done playing lyrebird recording');\n        resolve();\n      }).catch(function (e) {\n        ui.setStatus('error playing lyrebird recording');\n        reject(e);\n      });\n    }).catch(function (e) {\n      ui.setStatus('error: ' + e);\n      NProgress.done();\n      reject(e);\n    });\n  });\n}\n\nfunction processAudioBlob(blob) {\n  stopListening();\n  var formData = new FormData();\n  formData.append('data', blob);\n\n  ui.startProgress();\n  ui.setStatus('processing audio...');\n  $.ajax({\n    type: 'POST',\n    url: '/process',\n    data: formData,\n    processData: false,\n    contentType: false\n  }).then(function (res) {\n    console.log('transcription res', res);\n    var transcription = res.transcription;\n    ui.setStatus('audio transcribed: ' + transcription);\n    return asyncGenerateAndPlayUtterance(transcription);\n  }).then(function () {\n    ui.endProgress();\n    // startListening();\n    ui.setStatus('audio played, waiting for spacebar press');\n  }).catch(function (e) {\n    console.log('post error', e);\n    ui.endProgress();\n    // ui.setUserText('Error processing audio.');\n    // handleAudioProcessingError(e);\n    ui.setStatus('could not transcribe audio, unable to submit to lyrebird');\n    // alert('could not transcribe, unable to submit to lyrebird');\n    // startListening();\n  });\n}\n\nfunction createAudioMeter(audioContext, clipLevel, averaging, clipLag) {\n  var processor = audioContext.createScriptProcessor(512);\n  processor.onaudioprocess = volumeAudioProcess;\n  processor.clipping = false;\n  processor.lastClip = 0;\n  processor.volume = 0;\n  processor.clipLevel = clipLevel || 0.98;\n  processor.averaging = averaging || 0.95;\n  processor.clipLag = clipLag || 750;\n\n  // this will have no effect, since we don't copy the input to the output,\n  // but works around a current Chrome bug.\n  processor.connect(audioContext.destination);\n\n  processor.checkClipping = function () {\n    if (!this.clipping) return false;\n    if (this.lastClip + this.clipLag < window.performance.now()) this.clipping = false;\n    return this.clipping;\n  };\n\n  processor.shutdown = function () {\n    this.disconnect();\n    this.onaudioprocess = null;\n  };\n\n  return processor;\n}\n\nfunction volumeAudioProcess(event) {\n  var buf = event.inputBuffer.getChannelData(0);\n  var bufLength = buf.length;\n  var sum = 0;\n  var x = void 0;\n\n  // Do a root-mean-square on the samples: sum up the squares...\n  for (var i = 0; i < bufLength; i++) {\n    x = buf[i];\n    if (Math.abs(x) >= this.clipLevel) {\n      this.clipping = true;\n      this.lastClip = window.performance.now();\n    }\n    sum += x * x;\n  }\n\n  // ... then take the square root of the sum.\n  var rms = Math.sqrt(sum / bufLength);\n\n  // Now smooth this out with the averaging factor applied\n  // to the previous sample - take the max here because we\n  // want \"fast attack, slow release.\"\n  this.volume = Math.max(rms, this.volume * this.averaging);\n}\n\nfunction setupMediaSource(stream) {\n  // Create an AudioNode from the stream for getting vol\n  var mediaStreamSource = audioContext.createMediaStreamSource(stream);\n\n  // Create a new volume meter and connect it.\n  meter = createAudioMeter(audioContext);\n  mediaStreamSource.connect(meter);\n\n  // Create a MediaRecorder\n  mediaRecorder = new MediaRecorder(stream);\n  var recordedChunks = [];\n\n  mediaRecorder.ondataavailable = function (e) {\n    recordedChunks.push(e.data);\n  };\n\n  mediaRecorder.onstop = function (e) {\n    var blob = new Blob(recordedChunks, { type: 'audio/webm;codecs=opus' });\n    recordedChunks = [];\n\n    if (keepRecording === true) {\n      console.log('keeping nonsilent recording');\n      processAudioBlob(blob);\n    } else {\n      console.log('discarding silent recording');\n      ui.setStatus('discarding silent recording, waiting for spacebar');\n    }\n\n    keepRecording = false;\n    blob = null; // reset blob to make sure memory isn't leaking\n  };\n}\n\nfunction asyncGetWebcamAudioInfo() {\n  return new Promise(function (resolve, reject) {\n    navigator.mediaDevices.enumerateDevices().then(function (devices) {\n      var defaultDevice = null;\n      devices.map(function (device) {\n        if (device.kind === 'audioinput') {\n          if (device.label === 'HD Webcam C615') {\n            resolve(device);\n          } else if (device.deviceId === 'default') {\n            defaultDevice = device;\n          }\n        }\n      });\n      resolve(defaultDevice); // if we can't find webcam, return default\n    });\n  });\n}\n\nfunction asyncSetupAudio() {\n  return new Promise(function (resolve, reject) {\n    audioContext = new AudioContext();\n\n    asyncGetWebcamAudioInfo().then(function (deviceInfo) {\n      console.log(deviceInfo);\n      return navigator.mediaDevices.getUserMedia({\n        audio: {\n          deviceId: {\n            exact: deviceInfo.deviceId\n            // mandatory: {\n            //   googEchoCancellation: 'false',\n            //   googAutoGainControl: 'false',\n            //   googNoiseSuppression: 'false',\n            //   googHighpassFilter: 'false'\n            // }\n          } }\n      });\n    }).then(setupMediaSource).then(ui.setupSpacebarRecord).then(ui.setupArduinoButtonRecord).then(resolve).catch(function (e) {\n      reject(e);\n    });\n  });\n}\n\nexports.asyncSetupAudio = asyncSetupAudio;\nexports.asyncGenerateAndPlayUtterance = asyncGenerateAndPlayUtterance;\nexports.asyncPlayFromUrl = asyncPlayFromUrl;\nexports.startListening = startListening;\nexports.stopListening = stopListening;\n\n},{\"./_ui\":48,\"bluebird\":4,\"nprogress\":31,\"socket.io-client\":35}],47:[function(require,module,exports){\n'use strict';\n\nvar $body = $('body');\nvar $videoWrapper = $('#video-wrap');\nvar $video = $videoWrapper.find('video');\nvar video = $video[0];\n\nvar activated = false;\nvar screensaverTimeout = null;\n\nvar videoPlayingClass = 'video-playing';\n\nfunction playVideo() {\n  video.play();\n}\n\nfunction pauseVideo() {\n  video.pause();\n}\n\nfunction stopVideo() {\n  pauseVideo();\n  video.currentTime = 0;\n}\n\nfunction start() {\n  console.log('starting screensaver');\n  playVideo();\n  $body.addClass(videoPlayingClass);\n  activated = true;\n}\n\nfunction stop() {\n  console.log('stopping screensaver');\n  stopVideo();\n  $body.removeClass(videoPlayingClass);\n  activated = false;\n}\n\nfunction isActivated() {\n  return activated;\n}\n\nexports.start = start;\nexports.stop = stop;\nexports.isActivated = isActivated;\n\n},{}],48:[function(require,module,exports){\n'use strict';\n\nvar NProgress = require('nprogress');\nvar Promise = require('bluebird');\nvar download = require('downloadjs');\n\nvar io = require('socket.io-client');\nvar socket = io();\n\nvar screensaver = require('./_screensaver');\nvar video = require('./_video');\nvar audio = require('./_audio');\n\nvar $form = $('#form');\nvar $input = $('#input');\nvar $submitButton = $('#submit');\nvar $historySection = $('#recording-history');\nvar $historyList = $('#history-list');\nvar $status = $('#status');\nvar $volume = $('#vol');\n\nvar $cameraRoot = $('#camera-root');\nvar $cameraCanvas = void 0;\n\nvar screensaverTimeout = null;\nvar screensaverTimeoutLength = 30 * 1000; // ms\n\nfunction playFromUrl(url) {\n  var sound = new Audio(url);\n  sound.play();\n}\n\nfunction setupSpacebarRecord() {\n  $(window).on('keydown', function (e) {\n    if (e.keyCode === 32) {\n      // spacebar!\n      audio.startListening();\n    }\n  });\n}\n\nfunction setupArduinoButtonRecord() {\n  socket.on('new_msg', function (data) {\n    switch (data.msg) {\n      case 'press':\n        audio.startListening();\n        break;\n      default:\n        console.log('unknown message from arduino:', data.msg);\n        break;\n    }\n  });\n}\n\nfunction setupInputChange() {\n  $input.on('keyup', function (e) {\n    var $this = $(this);\n    if ($this.val().length > 0) {\n      $submitButton.prop('disabled', false);\n    } else {\n      $submitButton.prop('disabled', true);\n    }\n  });\n}\n\nfunction setupFormSubmit() {\n  $form.on('submit', function (e) {\n    e.preventDefault();\n    var text = $input.val();\n\n    if (!!text && text.length > 0) {\n      audio.asyncGenerateAndPlayUtterance(text).then(function () {\n        $input.val('');\n      }).catch(function (e) {\n        console.log('error generating text', e);\n      });\n    } else {\n      console.log('invalid text to generate');\n    }\n  });\n}\n\n// prevent screensaver on every user action\nfunction setupActivityWake() {\n  $(window).on('keydown mousemove mousedown', function (e) {\n    keepAlive();\n  });\n}\n\n// stave off screensaver\nfunction keepAlive() {\n  console.log('keepalive');\n  if (screensaver.isActivated()) {\n    wakeUp();\n  }\n\n  clearTimeout(screensaverTimeout);\n  screensaverTimeout = setTimeout(goToSleep, screensaverTimeoutLength);\n}\n\n// start screensaver, reset everything\nfunction goToSleep() {\n  screensaver.start();\n}\n\nfunction wakeUp() {\n  screensaver.stop();\n}\n\nvar count = 0;\nfunction takeScreenshot() {\n  return new Promise(function (resolve, reject) {\n    try {\n      var frame = captureVideoFrame('face_video', 'png');\n      resolve(frame);\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nfunction startProgress() {\n  NProgress.start();\n  return;\n}\n\nfunction endProgress() {\n  NProgress.done();\n  return;\n}\n\nfunction setStatus(text) {\n  $status.text(text);\n}\n\nfunction setVol(vol) {\n  $volume.text(vol);\n}\n\nfunction hideVol() {\n  $volume.parent().hide();\n}\n\nfunction showVol() {\n  $volume.parent().show();\n}\n\nfunction asyncInit() {\n  return new Promise(function (resolve, reject) {\n    try {\n      setupInputChange();\n      setupFormSubmit();\n      setupActivityWake();\n      video.asyncSetupCamera($cameraRoot).then(video.startWatching).then(keepAlive).then(resolve);\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nexports.keepAlive = keepAlive;\nexports.asyncInit = asyncInit;\nexports.startProgress = startProgress;\nexports.endProgress = endProgress;\nexports.takeScreenshot = takeScreenshot;\nexports.setupSpacebarRecord = setupSpacebarRecord;\nexports.setStatus = setStatus;\nexports.setVol = setVol;\nexports.hideVol = hideVol;\nexports.showVol = showVol;\nexports.setupArduinoButtonRecord = setupArduinoButtonRecord;\n\n},{\"./_audio\":46,\"./_screensaver\":47,\"./_video\":49,\"bluebird\":4,\"downloadjs\":11,\"nprogress\":31,\"socket.io-client\":35}],49:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('bluebird');\n\nvar ui = require('./_ui');\n\nvar detector = void 0;\nvar detectorRunning = false;\nvar faceInFrame = false;\nvar frames = 0;\n\nfunction hookUpDetectorEvents(detector) {\n  detector.addEventListener('onInitializeFailure', function (e) {\n    console.log('initialize failure');\n    console.log(e);\n  });\n\n  /*\n  onImageResults success is called when a frame is processed successfully and receives 3 parameters:\n  - Faces: Dictionary of faces in the frame keyed by the face id.\n           For each face id, the values of detected emotions, expressions, appearane metrics\n           and coordinates of the feature points\n  - image: An imageData object containing the pixel values for the processed frame.\n  - timestamp: The timestamp of the captured image in seconds.\n  */\n  detector.addEventListener('onImageResultsSuccess', function (faces, image, timestamp) {\n    frames++;\n    if (frames % 5 === 0) {\n      if (faces.length > 0) {\n        ui.keepAlive();\n        if (faceInFrame !== true) {\n          faceInFrame = true;\n        }\n      } else {\n        if (faceInFrame === true) {\n          faceInFrame = false;\n        }\n      }\n    }\n  });\n\n  /*\n  onImageResults success receives 3 parameters:\n  - image: An imageData object containing the pixel values for the processed frame.\n  - timestamp: An imageData object contain the pixel values for the processed frame.\n  - err_detail: A string contains the encountered exception.\n  */\n  detector.addEventListener('onImageResultsFailure', function (image, timestamp, err_detail) {\n    console.log('image result failure');\n    console.log(image, timestamp, err_detail);\n  });\n\n  detector.addEventListener('onResetSuccess', function (e) {\n    console.log('reset success');\n    console.log(e);\n  });\n\n  detector.addEventListener('onResetFailure', function (e) {\n    console.log('reset failure');\n    console.log(e);\n  });\n\n  detector.addEventListener('onStopSuccess', function (e) {\n    console.log('stop success');\n    console.log(e);\n  });\n\n  detector.addEventListener('onStopFailure', function (e) {\n    console.log('stop failure');\n    console.log(e);\n  });\n\n  detector.addEventListener('onWebcamConnectSuccess', function () {\n    console.log('connected to webcam');\n  });\n\n  detector.addEventListener('onWebcamConnectFailure', function () {\n    ui.setVideoStatus('Error connecting');\n    console.log('error connecting to webcam');\n  });\n}\n\nfunction startWatching() {\n  if (detectorRunning !== true) {\n    detectorRunning = true;\n    detector.start();\n  }\n}\n\nfunction stopWatching() {\n  if (detectorRunning === true) {\n    detectorRunning = false;\n    detector.stop();\n  }\n}\n\nfunction asyncSetupCamera($cameraRoot) {\n  return new Promise(function (resolve, reject) {\n    try {\n      var faceMode = affdex.FaceDetectorMode.LARGE_FACES;\n\n      // check camera size with https://webrtchacks.github.io/WebRTC-Camera-Resolution/\n      var width = 1920,\n          height = 1080;\n\n      detector = new affdex.CameraDetector($cameraRoot[0], width, height, faceMode);\n\n      hookUpDetectorEvents(detector);\n      resolve();\n    } catch (e) {\n      console.log('error setting up camera', e);\n      reject(e);\n    }\n  });\n}\n\nexports.asyncSetupCamera = asyncSetupCamera;\nexports.startWatching = startWatching;\nexports.stopWatching = stopWatching;\n\n},{\"./_ui\":48,\"bluebird\":4}],50:[function(require,module,exports){\n'use strict';\n\nvar ui = require('./_ui');\nvar video = require('./_video');\nvar audio = require('./_audio');\n\nfunction run() {\n  ui.asyncInit().then(audio.asyncSetupAudio).then(function () {\n    console.log('done!');\n  }).catch(function (e) {\n    console.log('error initting', e);\n  });\n}\n\n$(window).on('load', function () {\n  run();\n});\n\n},{\"./_audio\":46,\"./_ui\":48,\"./_video\":49}]},{},[50]);\n"]}